class JoomlaSwitcherElement extends HTMLElement{static get observedAttributes(){return["type","offText","onText"]}get type(){return this.getAttribute("type")}set type(t){return this.setAttribute("type",t)}get offText(){return this.getAttribute("offText")||"Off"}get onText(){return this.getAttribute("onText")||"On"}constructor(){super(),this.inputs=[],this.spans=[],this.inputsContainer="",this.spansContainer="",this.newActive=""}connectedCallback(){if(this.inputs=[].slice.call(this.querySelectorAll("input")),2!==this.inputs.length||"radio"!==this.inputs[0].type)throw new Error('`Joomla-switcher` requires two inputs type="checkbox"');this.createMarkup.bind(this)(),this.inputsContainer=this.firstElementChild,this.spansContainer=this.lastElementChild,this.inputs[1].checked?(this.inputs[1].parentNode.classList.add("active"),this.spans[1].classList.add("active")):this.spans[0].classList.add("active"),this.inputs.forEach((t,e)=>{t.setAttribute("tabindex","-1"),t.setAttribute("role","switch"),t.setAttribute("aria-labelledby",this.spans[e].innerHTML),t.addEventListener("click",this.toggle.bind(this))}),this.inputsContainer.addEventListener("keydown",this.keyEvents.bind(this))}disconnectedCallback(){this.removeEventListener("joomla.switcher.toggle",this.toggle,!0),this.removeEventListener("click",this.switch,!0),this.removeEventListener("keydown",this.keydown,!0)}dispatchCustomEvent(t){const e=new CustomEvent(t,{bubbles:!0,cancelable:!0});e.relatedTarget=this,this.dispatchEvent(e),this.removeEventListener(t,this)}createMarkup(){let t=0;const e=document.createElement("span");e.classList.add("switcher"),e.setAttribute("tabindex",0),this.type||this.setAttribute("type","success");const s=document.createElement("span");s.classList.add("switch"),this.inputs.forEach((s,i)=>{s.checked&&s.setAttribute("aria-checked",!0),e.appendChild(s),1===i&&s.checked&&(t=1)}),e.appendChild(s);const i=document.createElement("span");i.classList.add("switcher-labels");const n=document.createElement("span");n.classList.add("switcher-label-0"),n.innerText=this.offText;const a=document.createElement("span");a.classList.add("switcher-label-1"),a.innerText=this.onText,0===t?n.classList.add("active"):a.classList.add("active"),this.spans.push(n),this.spans.push(a),i.appendChild(n),i.appendChild(a),this.appendChild(e),this.appendChild(i)}switch(){this.spans.forEach(t=>{t.classList.remove("active")}),this.inputsContainer.classList.contains("active")?this.inputsContainer.classList.remove("active"):this.inputsContainer.classList.add("active"),this.inputs[this.newActive].classList.contains("active")?(this.inputs.forEach(t=>{t.classList.remove("active"),t.removeAttribute("checked"),t.setAttribute("aria-checked",!1)}),this.dispatchCustomEvent("joomla.switcher.off")):(this.inputs.forEach(t=>{t.classList.remove("active"),t.removeAttribute("checked"),t.removeAttribute("aria-checked")}),this.inputs[this.newActive].classList.add("active"),this.inputs[this.newActive].setAttribute("aria-checked",!0),this.dispatchCustomEvent("joomla.switcher.on")),this.inputs[this.newActive].setAttribute("checked",""),this.inputs[this.newActive].setAttribute("aria-checked",!0),this.spans[this.newActive].classList.add("active")}toggle(t){t.preventDefault(),this.newActive=this.inputs[1].classList.contains("active")?0:1,this.switch.bind(this)()}keyEvents(t){13!==t.keyCode&&32!==t.keyCode||(t.preventDefault(),this.newActive=this.inputs[1].classList.contains("active")?0:1,this.switch.bind(this)())}}customElements.define("joomla-switcher",JoomlaSwitcherElement);