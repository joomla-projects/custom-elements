function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function o(t,e,n){return(o=r()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&i(o,n.prototype),o}).apply(null,arguments)}function u(t){var e="function"==typeof Map?new Map:void 0;return(u=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,u)}function u(){return o(t,arguments,n(this).constructor)}return u.prototype=Object.create(t.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),i(u,t)})(t)}function s(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}customElements.define("joomla-tip",function(o){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(b,u(HTMLElement));var c,l,a,p,f,h=(c=b,l=r(),function(){var t,e=n(c);if(l){var i=n(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return s(this,t)});function b(){return t(this,b),h.apply(this,arguments)}return a=b,f=[{key:"observedAttributes",get:function(){return["type","label","tip","text","position"]}}],(p=[{key:"connectedCallback",value:function(){(!this.position||this.position&&-1===["top","bottom","left","right"].indexOf(this.position))&&(this.position="top"),this.btnElement=document.createElement("button"),this.spanElement=document.createElement("span"),this.btnElement.setAttribute("aria-label",this.label?this.label:"more info"),this.btnElement.innerHTML=this.text?this.text:"",this.spanElement.setAttribute("role","status"),this.btnElement.addEventListener("click",this.showTip.bind(this)),this.append(this.btnElement),this.append(this.spanElement)}},{key:"disconnectedCallback",value:function(){this.querySelector("button").removeEventListener("click",this.showTip,!0)}},{key:"showTip",value:function(){var t=this,e=this;document.addEventListener("click",(function(n){t.btnElement!==n.target&&(t.spanElement.innerHTML="",e.removeEventListener("keydown",t))})),document.addEventListener("keydown",(function(n){9===(n.keyCode||n.which)&&(t.spanElement.innerHTML="",e.removeEventListener("keydown",t))})),this.spanElement.innerHTML="",this.spanElement.innerHTML='<span class="toggletip-bubble '.concat(this.position,'">').concat(this.tip,"</span>")}},{key:"dispatchCustomEvent",value:function(t){var e=new CustomEvent(t,{bubbles:!0,cancelable:!0});e.relatedTarget=this,this.dispatchEvent(e),this.removeEventListener(t,this)}},{key:"type",get:function(){return this.getAttribute("type")},set:function(t){return this.setAttribute("type",t)}},{key:"label",get:function(){return this.getAttribute("label")},set:function(t){return this.setAttribute("label",t)}},{key:"tip",get:function(){return this.getAttribute("tip")},set:function(t){return this.setAttribute("tip",t)}},{key:"position",get:function(){return this.getAttribute("position")},set:function(t){return this.setAttribute("position",t)}},{key:"text",get:function(){return this.getAttribute("text")},set:function(t){return this.getAttribute("text",t)}}])&&e(a.prototype,p),f&&e(a,f),b}());
