function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function t(e) {
  return (t = "function" == typeof Symbol && "symbol" == _typeof(Symbol.iterator) ? function (t) {
    return _typeof(t);
  } : function (t) {
    return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof(t);
  })(e);
}

function e(t, e) {
  if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
}

function n(t, e) {
  for (var n = 0; n < e.length; n++) {
    var r = e[n];
    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r);
  }
}

function r(e, n) {
  return !n || "object" !== t(n) && "function" != typeof n ? function (t) {
    if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return t;
  }(e) : n;
}

function o(t) {
  var e = "function" == typeof Map ? new Map() : void 0;
  return (o = function o(t) {
    if (null === t || (n = t, -1 === Function.toString.call(n).indexOf("[native code]"))) return t;
    var n;
    if ("function" != typeof t) throw new TypeError("Super expression must either be null or a function");

    if (void 0 !== e) {
      if (e.has(t)) return e.get(t);
      e.set(t, r);
    }

    function r() {
      return i(t, arguments, a(this).constructor);
    }

    return r.prototype = Object.create(t.prototype, {
      constructor: {
        value: r,
        enumerable: !1,
        writable: !0,
        configurable: !0
      }
    }), c(r, t);
  })(t);
}

function i(t, e, n) {
  return (i = u() ? Reflect.construct : function (t, e, n) {
    var r = [null];
    r.push.apply(r, e);
    var o = new (Function.bind.apply(t, r))();
    return n && c(o, n.prototype), o;
  }).apply(null, arguments);
}

function u() {
  if ("undefined" == typeof Reflect || !Reflect.construct) return !1;
  if (Reflect.construct.sham) return !1;
  if ("function" == typeof Proxy) return !0;

  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
  } catch (t) {
    return !1;
  }
}

function c(t, e) {
  return (c = Object.setPrototypeOf || function (t, e) {
    return t.__proto__ = e, t;
  })(t, e);
}

function a(t) {
  return (a = Object.setPrototypeOf ? Object.getPrototypeOf : function (t) {
    return t.__proto__ || Object.getPrototypeOf(t);
  })(t);
}

var f = function (t) {
  !function (t, e) {
    if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
    t.prototype = Object.create(e && e.prototype, {
      constructor: {
        value: t,
        writable: !0,
        configurable: !0
      }
    }), e && c(t, e);
  }(y, o(HTMLElement));
  var i,
      f,
      l,
      s,
      p,
      d = (i = y, f = u(), function () {
    var t,
        e = a(i);

    if (f) {
      var n = a(this).constructor;
      t = Reflect.construct(e, arguments, n);
    } else t = e.apply(this, arguments);

    return r(this, t);
  });

  function y() {
    return e(this, y), d.apply(this, arguments);
  }

  return l = y, p = [{
    key: "observedAttributes",
    get: function get() {
      return ["for"];
    }
  }], (s = [{
    key: "for",
    get: function get() {
      return this.getAttribute("for");
    },
    set: function set(t) {
      return this.setAttribute("for", t);
    }
  }, {
    key: "connectedCallback",
    value: function value() {
      var t = this;
      this.setAttribute("aria-labelledby", this["for"].substring(1));
      var e = document.querySelector(this["for"]),
          n = this.querySelectorAll("a");
      e.id && (e.setAttribute("aria-haspopup", !0), e.setAttribute("aria-expanded", !1), e.addEventListener("click", function (r) {
        t.hasAttribute("expanded") ? (t.removeAttribute("expanded"), r.target.setAttribute("aria-expanded", !1)) : (t.setAttribute("expanded", ""), r.target.setAttribute("aria-expanded", !0)), document.addEventListener("click", function (n) {
          n.target !== e && (t.findAncestor(n.target, "joomla-dropdown") || t.close());
        }), n.forEach(function (e) {
          e.addEventListener("click", function () {
            t.close();
          });
        });
      }));
    }
  }, {
    key: "dispatchCustomEvent",
    value: function value(t) {
      var e = new CustomEvent(t);
      e.relatedTarget = this, this.dispatchEvent(e), this.removeEventListener(t, this);
    }
  }, {
    key: "adoptedCallback",
    value: function value(t, e) {}
  }, {
    key: "attributeChangedCallback",
    value: function value(t, e, n) {}
  }, {
    key: "close",
    value: function value() {
      var t = document.querySelector("#".concat(this.getAttribute("aria-labelledby")));
      this.removeAttribute("expanded"), t.setAttribute("aria-expanded", !1);
    }
  }, {
    key: "findAncestor",
    value: function value(t, e) {
      for (; (t = t.parentElement) && t.nodeName.toLowerCase() !== e;) {
        ;
      }

      return t;
    }
  }]) && n(l.prototype, s), p && n(l, p), y;
}();

customElements.define("joomla-dropdown", f);
