function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function t(e) {
  return (t = "function" == typeof Symbol && "symbol" == _typeof(Symbol.iterator) ? function (t) {
    return _typeof(t);
  } : function (t) {
    return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof(t);
  })(e);
}

function e(t, e) {
  for (var r = 0; r < e.length; r++) {
    var i = e[r];
    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i);
  }
}

function r(e, r) {
  return !r || "object" !== t(r) && "function" != typeof r ? function (t) {
    if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return t;
  }(e) : r;
}

function i(t) {
  var e = "function" == typeof Map ? new Map() : void 0;
  return (i = function i(t) {
    if (null === t || (r = t, -1 === Function.toString.call(r).indexOf("[native code]"))) return t;
    var r;
    if ("function" != typeof t) throw new TypeError("Super expression must either be null or a function");

    if (void 0 !== e) {
      if (e.has(t)) return e.get(t);
      e.set(t, i);
    }

    function i() {
      return n(t, arguments, c(this).constructor);
    }

    return i.prototype = Object.create(t.prototype, {
      constructor: {
        value: i,
        enumerable: !1,
        writable: !0,
        configurable: !0
      }
    }), a(i, t);
  })(t);
}

function n(t, e, r) {
  return (n = o() ? Reflect.construct : function (t, e, r) {
    var i = [null];
    i.push.apply(i, e);
    var n = new (Function.bind.apply(t, i))();
    return r && a(n, r.prototype), n;
  }).apply(null, arguments);
}

function o() {
  if ("undefined" == typeof Reflect || !Reflect.construct) return !1;
  if (Reflect.construct.sham) return !1;
  if ("function" == typeof Proxy) return !0;

  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;
  } catch (t) {
    return !1;
  }
}

function a(t, e) {
  return (a = Object.setPrototypeOf || function (t, e) {
    return t.__proto__ = e, t;
  })(t, e);
}

function c(t) {
  return (c = Object.setPrototypeOf ? Object.getPrototypeOf : function (t) {
    return t.__proto__ || Object.getPrototypeOf(t);
  })(t);
}

customElements.define("joomla-tab", function (t) {
  !function (t, e) {
    if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
    t.prototype = Object.create(e && e.prototype, {
      constructor: {
        value: t,
        writable: !0,
        configurable: !0
      }
    }), e && a(t, e);
  }(d, i(HTMLElement));
  var n,
      u,
      s,
      l,
      h,
      f = (n = d, u = o(), function () {
    var t,
        e = c(n);

    if (u) {
      var i = c(this).constructor;
      t = Reflect.construct(e, arguments, i);
    } else t = e.apply(this, arguments);

    return r(this, t);
  });

  function d() {
    var t;
    return function (t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }(this, d), (t = f.call(this)).hasActive = !1, t.currentActive = "", t.hasNested = !1, t.isNested = !1, t.tabs = [], t;
  }

  return s = d, h = [{
    key: "observedAttributes",
    get: function get() {
      return ["recall", "orientation", "view"];
    }
  }], (l = [{
    key: "recall",
    get: function get() {
      return this.getAttribute("recall");
    }
  }, {
    key: "view",
    get: function get() {
      return this.getAttribute("view");
    },
    set: function set(t) {
      this.setAttribute("view", t);
    }
  }, {
    key: "orientation",
    get: function get() {
      return this.getAttribute("orientation");
    },
    set: function set(t) {
      this.setAttribute("orientation", t);
    }
  }, {
    key: "connectedCallback",
    value: function value() {
      var t = this;
      (!this.orientation || this.orientation && -1 === ["horizontal", "vertical"].indexOf(this.orientation)) && (this.orientation = "horizontal");
      var e = this,
          r = [].slice.call(this.querySelectorAll("section")),
          i = [],
          n = [];

      if (r) {
        if (this.parentNode.closest("joomla-tab") && (this.isNested = !0), this.querySelector("joomla-tab") && (this.hasNested = !0), this.hasAttribute("recall")) {
          var o = sessionStorage.getItem(this.getStorageKey());
          o && n.push(o);
        }

        if (this.hasNested) {
          var a = sessionStorage.getItem(this.getStorageKey());

          if (a && n.push(a), n.length && "" !== n[0]) {
            var c = n[0].substring(5),
                u = this.querySelector("#".concat(c));

            if (u) {
              var s = u.closest("joomla-tab");

              if (this.isNested) {
                var l = s.closest("section");
                l && n.push("#tab-".concat(l.id));
              }
            }
          }

          r.forEach(function (t) {
            if (n.length) {
              var r = "#tab-".concat(t.id);
              -1 === n.indexOf(r) ? t.removeAttribute("active") : t.setAttribute("active", "");
            }

            t.parentNode === e && i.push(t);
          });
        } else r.forEach(function (t) {
          if (n.length) {
            var e = "#tab-".concat(t.id);
            -1 === n.indexOf(e) ? t.removeAttribute("active") : t.setAttribute("active", "");
          }
        }), i = r;

        if ("accordion" !== this.view && this.createNavigation(i), i.forEach(function (e) {
          e.setAttribute("role", "tabpanel"), t.tabs.push("#tab-".concat(e.id)), e.hasAttribute("active") && (t.hasActive = !0, t.currentActive = e.id, t.querySelector("#tab-".concat(e.id)).setAttribute("aria-selected", "true"), t.querySelector("#tab-".concat(e.id)).setAttribute("active", ""), t.querySelector("#tab-".concat(e.id)).setAttribute("tabindex", "0"));
        }), this.hasActive || (i[0].setAttribute("active", ""), i[0].removeAttribute("aria-hidden"), this.hasActive = !0, this.currentActive = i[0].id, this.querySelector("#tab-".concat(i[0].id)).setAttribute("aria-selected", "true"), this.querySelector("#tab-".concat(i[0].id)).setAttribute("tabindex", "0"), this.querySelector("#tab-".concat(i[0].id)).setAttribute("active", "")), window.location.href.match(/#\S[^&]*/)) {
          var h = window.location.href.match(/#\S[^&]*/),
              f = this.querySelector(h[0]);

          if (f) {
            var d = f.closest("joomla-tab");

            if (this.isNested) {
              var b = d.closest("joomla-tab"),
                  v = d.closest("section");
              b.showTab(v), this.show(f);
            } else this.showTab(f);
          }
        }

        e.checkView(e), window.addEventListener("resize", function () {
          e.checkView(e);
        });
      }
    }
  }, {
    key: "disconnectedCallback",
    value: function value() {
      var t = this,
          e = this.querySelector("ul");
      [].slice.call(e.querySelectorAll("a")).forEach(function (e) {
        e.removeEventListener("click", t);
      }), e.removeEventListener("keydown", this);
    }
  }, {
    key: "createNavigation",
    value: function value(t) {
      var e = this;

      if ("ul" !== this.firstElementChild.nodeName.toLowerCase()) {
        var r = document.createElement("ul");
        r.setAttribute("role", "tablist");

        var i = function i(t) {
          t.preventDefault();
          var r = "accordion" === e.view && t.currentTarget.hasAttribute("active");
          if (e.hasActive && (e.hideCurrent(), r)) e.hasActive = !1;else {
            var i = e.currentActive;
            e.dispatchCustomEvent("joomla.tab.show", t.currentTarget, e.querySelector("#tab-".concat(i))), t.currentTarget.setAttribute("active", ""), t.currentTarget.setAttribute("aria-selected", "true"), t.currentTarget.setAttribute("tabindex", "0"), e.querySelector(t.currentTarget.hash).setAttribute("active", ""), e.querySelector(t.currentTarget.hash).removeAttribute("aria-hidden"), e.currentActive = t.currentTarget.hash.substring(1), e.dispatchCustomEvent("joomla.tab.shown", t.currentTarget, e.querySelector("#tab-".concat(i))), e.saveState("#tab-".concat(t.currentTarget.hash.substring(1))), e.hasActive = !0;
          }
        };

        t.forEach(function (t) {
          if (t.id) {
            var e = t.hasAttribute("active"),
                n = document.createElement("li"),
                o = document.createElement("a");
            n.setAttribute("role", "presentation"), o.setAttribute("role", "tab"), o.setAttribute("aria-controls", t.id), o.setAttribute("aria-selected", e ? "true" : "false"), o.setAttribute("tabindex", e ? "0" : "-1"), o.setAttribute("href", "#".concat(t.id)), o.setAttribute("id", "tab-".concat(t.id)), o.innerHTML = t.getAttribute("name"), e && o.setAttribute("active", ""), o.addEventListener("click", i), n.appendChild(o), r.appendChild(n), t.setAttribute("aria-labelledby", "tab-".concat(t.id)), e || t.setAttribute("aria-hidden", "true");
          }
        }), this.insertAdjacentElement("afterbegin", r), this.addKeyListeners();
      }
    }
  }, {
    key: "hideCurrent",
    value: function value() {
      if (this.currentActive) {
        var t = this.querySelector('a[aria-controls="'.concat(this.currentActive, '"]'));
        this.dispatchCustomEvent("joomla.tab.hide", t, this.querySelector("#tab-".concat(this.currentActive))), t.removeAttribute("active"), t.setAttribute("tabindex", "-1"), this.querySelector("#".concat(this.currentActive)).removeAttribute("active"), this.querySelector("#".concat(this.currentActive)).setAttribute("aria-hidden", "true"), t.removeAttribute("aria-selected"), this.dispatchCustomEvent("joomla.tab.hidden", t, this.querySelector("#tab-".concat(this.currentActive)));
      }
    }
  }, {
    key: "showTab",
    value: function value(t) {
      document.querySelector("#tab-".concat(t.id)).click();
    }
  }, {
    key: "show",
    value: function value(t) {
      t.click();
    }
  }, {
    key: "addKeyListeners",
    value: function value() {
      var t = this;
      this.querySelector("ul").addEventListener("keyup", function (e) {
        var r = t.querySelector("#tab-".concat(t.currentActive)),
            i = r.parentNode.previousElementSibling || r.parentNode.parentNode.lastElementChild,
            n = r.parentNode.nextElementSibling || r.parentNode.parentNode.firstElementChild;
        if (!e.metaKey && !e.altKey && -1 !== t.tabs.indexOf("#".concat(document.activeElement.id))) switch (e.keyCode) {
          case 37:
          case 38:
            i.querySelector("a").click(), i.querySelector("a").focus(), e.preventDefault();
            break;

          case 39:
          case 40:
            n.querySelector("a").click(), n.querySelector("a").focus(), e.preventDefault();
        }
      });
    }
  }, {
    key: "getStorageKey",
    value: function value() {
      return window.location.href.toString().split(window.location.host)[1].replace(/&return=[a-zA-Z0-9%]+/, "").split("#")[0];
    }
  }, {
    key: "saveState",
    value: function value(t) {
      var e = this.getStorageKey();
      sessionStorage.setItem(e, t);
    }
  }, {
    key: "checkView",
    value: function value(t) {
      var e = t,
          r = e.querySelector("ul"),
          i = [];

      if (document.body.getBoundingClientRect().width > 920) {
        if ("tabs" === this.view) return;
        e.view = "tabs";

        for (var n = [].slice.call(r.querySelectorAll("section")), o = 0, a = n.length; o < a; ++o) {
          n[o].parentNode.parentNode.parentNode === e && i.push(n[o]);
        }

        i.length && i.forEach(function (t) {
          e.appendChild(t);
        });
      } else {
        if ("accordion" === this.view) return;
        e.view = "accordion";

        for (var c = [].slice.call(e.querySelectorAll("section")), u = 0, s = c.length; u < s; ++u) {
          c[u].parentNode === e && i.push(c[u]);
        }

        i.length && i.forEach(function (t) {
          var r = e.querySelector('a[aria-controls="'.concat(t.id, '"]'));
          r.parentNode.parentNode === e.firstElementChild && r.parentNode.appendChild(t);
        });
      }
    }
  }, {
    key: "dispatchCustomEvent",
    value: function value(t, e, r) {
      var i = new CustomEvent(t, {
        bubbles: !0,
        cancelable: !0
      });
      i.relatedTarget = r, e.dispatchEvent(i), e.removeEventListener(t, e);
    }
  }]) && e(s.prototype, l), h && e(s, h), d;
}());
