class CollapseElement extends HTMLElement{static get observedAttributes(){return["state"]}get state(){return this.getAttribute("state")||"closed"}set state(t){return this.setAttribute("state",t)}constructor(){if(super(),!document.getElementById("joomla-collapse-stylesheet")){const t=document.createElement("style");t.id="joomla-collapse-stylesheet",t.innerText="joomla-collapse[state=closed]{display:none}joomla-collapse[state=open]{display:block}",document.head.appendChild(t)}}connectedCallback(){this.id&&[].slice.call(document.querySelectorAll(`[href="#${this.id}"],[data-target="#${this.id}"]`)).forEach(function(t){this.state&&"closed"!==this.state?(t.setAttribute("aria-expanded","true"),t.setAttribute("aria-controls",this.id)):(t.setAttribute("aria-expanded","false"),t.setAttribute("aria-controls",this.id)),t.addEventListener("click",t=>{let e="";t.target.hasAttribute("data-target")||(e=t.target.getAttribute("href").replace("#","")),t.target.hasAttribute("href")||(e=t.target.getAttribute("data-target").replace("#","")),t.preventDefault(),t.stopPropagation(),document.getElementById(e).toggle()})})}disconnectedCallback(){let t=document.querySelector(`[href="#${this.id}"]`);t||(t=document.querySelector(`[data-target="#${this.id}"]`)),t&&t.removeEventListener("click",this)}attributeChangedCallback(t,e,a){switch(t){case"state":const e=document.querySelector(`[href="#${this.id}"]`);"closed"===a?e.setAttribute("aria-expanded","false"):"open"===a&&e.setAttribute("aria-expanded","true")}}toggle(){let t=document.querySelector(`[href="#${this.id}"]`);t||(t=document.querySelector(`[data-target="#${this.id}"]`)),"closed"===this.state?(this.state="open",t.setAttribute("aria-expanded","true")):(this.state="closed",t.setAttribute("aria-expanded","false"))}}customElements.define("joomla-collapse",CollapseElement);