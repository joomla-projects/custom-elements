class DropdownElement extends HTMLElement{static get observedAttributes(){return["for"]}get for(){return this.getAttribute("for")}constructor(e){super(),this.includeCss()}connectedCallback(){this.setAttribute("aria-labelledby",this.for.substring(1));const e=document.querySelector(this.for),t=this.querySelectorAll("a"),r=this;e.id&&(e.setAttribute("aria-haspopup","true"),e.setAttribute("aria-expanded","false"),e.addEventListener("click",o=>{console.log("clicked"),r.hasAttribute("expanded")?(r.removeAttribute("expanded"),o.target.setAttribute("aria-expanded","false")):(r.setAttribute("expanded",""),o.target.setAttribute("aria-expanded","true")),document.addEventListener("click",t=>{t.target!==e&&(r.findAncestor(t.target,"joomla-dropdown")||r.close())});for(let e=0,o=t.length;e<o;e++)t[e].addEventListener("click",e=>{r.close()})}))}disconnectedCallback(){}adoptedCallback(e,t){}attributeChangedCallback(e,t,r){e}close(){const e=document.querySelector(`#${this.getAttribute("aria-labelledby")}`);this.removeAttribute("expanded"),e.setAttribute("aria-expanded","false")}findAncestor(e,t){for(;(e=e.parentElement)&&e.nodeName.toLowerCase()!==t;);return e}includeCss(){if(!document.getElementById("joomla-dropdown-stylesheet")){const e=document.createElement("style");e.id="joomla-dropdown-stylesheet",e.innerHTML=`joomla-dropdown{display:none}joomla-dropdown[expanded]{position:relative;display:block;top:100%;left:0;z-index:1000;min-width:10rem;width:20rem;padding:.5rem 0;margin:.125rem 0 0;font-size:1rem;color:#292b2c;text-align:left;list-style:none;background-color:#fff;-webkit-background-clip:padding-box;background-clip:padding-box;border:1px solid rgba(0,0,0,.15);border-radius:.25rem}`,document.head.appendChild(e)}}}customElements.define("joomla-dropdown",DropdownElement);