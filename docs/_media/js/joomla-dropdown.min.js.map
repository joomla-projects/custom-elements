{"version":3,"file":"joomla-dropdown.min.js","sources":["../../../src/js/dropdown/dropdown.js"],"sourcesContent":["(() => {\n  class JoomlaDropdownElement extends HTMLElement {\n    /* Attributes to monitor */\n    static get observedAttributes() {\n      return ['for'];\n    }\n\n    get for() { return this.getAttribute('for'); }\n\n    set for(value) { return this.setAttribute('for', value); }\n\n    connectedCallback() {\n      this.setAttribute('aria-labelledby', this.for.substring(1));\n      const button = document.querySelector(this.for);\n      const innerLinks = this.querySelectorAll('a');\n\n      if (!button.id) {\n        return;\n      }\n      // var children = [].slice.call( menu[getElementsByTagName]('*'));\n      // this.classList.add('dropdown');\n\n      button.setAttribute('aria-haspopup', true);\n      button.setAttribute('aria-expanded', false);\n\n      button.addEventListener('click', (event) => {\n        if (this.hasAttribute('expanded')) {\n          this.removeAttribute('expanded');\n          event.target.setAttribute('aria-expanded', false);\n        } else {\n          this.setAttribute('expanded', '');\n          event.target.setAttribute('aria-expanded', true);\n        }\n\n        document.addEventListener('click', (evt) => {\n          if (evt.target !== button) {\n            if (!this.findAncestor(evt.target, 'joomla-dropdown')) {\n              this.close();\n            }\n          }\n        });\n\n        innerLinks.forEach((innerLink) => {\n          innerLink.addEventListener('click', () => {\n            this.close();\n          });\n        });\n      });\n    }\n\n    /*eslint-disable */\n    /* Method to dispatch events */\n    dispatchCustomEvent(eventName) {\n      const OriginalCustomEvent = new CustomEvent(eventName);\n      OriginalCustomEvent.relatedTarget = this;\n      this.dispatchEvent(OriginalCustomEvent);\n      this.removeEventListener(eventName, this);\n    }\n\n    adoptedCallback(oldDocument, newDocument) { }\n\n\n    attributeChangedCallback(attr, oldValue, newValue) {\n      switch (attr) {\n        // case 'name':\n        // console.log(newValue);\n        // break;\n      }\n    }\n    /* eslint-enable */\n\n    close() {\n      const button = document.querySelector(`#${this.getAttribute('aria-labelledby')}`);\n      this.removeAttribute('expanded');\n      button.setAttribute('aria-expanded', false);\n    }\n\n    /* eslint-disable */\n    findAncestor(el, tagName) {\n      while ((el = el.parentElement) && el.nodeName.toLowerCase() !== tagName);\n      return el;\n    }\n    /* eslint-enable */\n  }\n\n  customElements.define('joomla-dropdown', JoomlaDropdownElement);\n})();\n"],"names":["JoomlaDropdownElement","HTMLElement","observedAttributes","for","this","getAttribute","value","setAttribute","[object Object]","substring","button","document","querySelector","innerLinks","querySelectorAll","id","addEventListener","event","hasAttribute","removeAttribute","target","evt","findAncestor","close","forEach","innerLink","eventName","OriginalCustomEvent","CustomEvent","relatedTarget","dispatchEvent","removeEventListener","oldDocument","newDocument","attr","oldValue","newValue","el","tagName","parentElement","nodeName","toLowerCase","customElements","define"],"mappings":"AAAA,MACE,MAAMA,UAA8BC,YAElCC,gCACE,MAAO,CAAC,OAGVC,UAAY,OAAOC,KAAKC,aAAa,OAErCF,QAAQG,GAAS,OAAOF,KAAKG,aAAa,MAAOD,GAEjDE,oBACEJ,KAAKG,aAAa,kBAAmBH,KAAKD,IAAIM,UAAU,IACxD,MAAMC,EAASC,SAASC,cAAcR,KAAKD,KACrCU,EAAaT,KAAKU,iBAAiB,KAEpCJ,EAAOK,KAMZL,EAAOH,aAAa,iBAAiB,GACrCG,EAAOH,aAAa,iBAAiB,GAErCG,EAAOM,iBAAiB,SAAUC,IAC5Bb,KAAKc,aAAa,aACpBd,KAAKe,gBAAgB,YACrBF,EAAMG,OAAOb,aAAa,iBAAiB,KAE3CH,KAAKG,aAAa,WAAY,IAC9BU,EAAMG,OAAOb,aAAa,iBAAiB,IAG7CI,SAASK,iBAAiB,SAAUK,IAC9BA,EAAID,SAAWV,IACZN,KAAKkB,aAAaD,EAAID,OAAQ,oBACjChB,KAAKmB,YAKXV,EAAWW,SAASC,IAClBA,EAAUT,iBAAiB,SAAS,KAClCZ,KAAKmB,kBAQbf,oBAAoBkB,GAClB,MAAMC,EAAsB,IAAIC,YAAYF,GAC5CC,EAAoBE,cAAgBzB,KACpCA,KAAK0B,cAAcH,GACnBvB,KAAK2B,oBAAoBL,EAAWtB,MAGtCI,gBAAgBwB,EAAaC,IAG7BzB,yBAAyB0B,EAAMC,EAAUC,IASzC5B,QACE,MAAME,EAASC,SAASC,cAAc,IAAIR,KAAKC,aAAa,sBAC5DD,KAAKe,gBAAgB,YACrBT,EAAOH,aAAa,iBAAiB,GAIvCC,aAAa6B,EAAIC,GACf,MAAQD,EAAKA,EAAGE,gBAAkBF,EAAGG,SAASC,gBAAkBH,IAChE,OAAOD,GAKXK,eAAeC,OAAO,kBAAmB3C,IArF3C"}