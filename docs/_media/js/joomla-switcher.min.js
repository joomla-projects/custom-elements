class SwitcherElement extends HTMLElement{static get observedAttributes(){return["type","offText","onText"]}get type(){return this.getAttribute("type")}set type(e){return this.setAttribute("type",e)}get offText(){return this.getAttribute("offText")}get onText(){return this.getAttribute("onText")}constructor(){super(),this.includeCss()}connectedCallback(){const e=this;this.createMarkup(e);const t=[].slice.call(e.querySelectorAll("input")),s=e.querySelector("span.switcher"),i=t[1].parentNode.nextElementSibling;s.setAttribute("tabindex",0),t[1].checked?(t[1].parentNode.classList.add("active"),i.querySelector(`.switcher-label-${t[1].value}`).classList.add("active")):i.querySelector(`.switcher-label-${t[0].value}`).classList.add("active"),t.forEach(t=>{if(t.id){const e=t.parentNode.nextElementSibling.querySelector(`span.switcher-label-${t.value}`);e.id=`${t.id}-label`,t.setAttribute("aria-labelledby",e.id)}t.setAttribute("tabindex","-1"),t.addEventListener("click",t=>{e.switch()})}),s.addEventListener("keydown",e=>{13!==e.keyCode&&32!==e.keyCode||(e.preventDefault(),s.querySelector("input:not(.active)").click())})}disconnectedCallback(){this.removeEventListener("joomla.switcher.toggle",this),this.removeEventListener("joomla.switcher.on",this),this.removeEventListener("joomla.switcher.off",this),this.removeEventListener("click",this)}dispatchCustomEvent(e){const t=new CustomEvent(e,{bubbles:!0,cancelable:!0});t.relatedTarget=this,this.dispatchEvent(t),this.removeEventListener(e,this)}createMarkup(e){let t=[].slice.call(e.querySelectorAll("input")),s=0;const i=document.createElement("span");i.classList.add("switcher"),this.type&&-1!==["primary","danger"].indexOf(this.type)&&i.classList.add(`switcher-${this.type}`);const c=document.createElement("span");c.classList.add("switch"),t.forEach((e,t)=>{i.appendChild(e),1===t&&e.checked&&(s=1)}),i.appendChild(c);const l=document.createElement("span");l.classList.add("switcher-labels");const a=document.createElement("span");a.classList.add("switcher-label-0"),a.innerText=this.getText(this.offText,"Off");const n=document.createElement("span");for(n.classList.add("switcher-label-1"),n.innerText=this.getText(this.onText,"On"),0===s?a.classList.add("active"):n.classList.add("active"),l.appendChild(a),l.appendChild(n);e.firstChild;)e.removeChild(e.firstChild);return e.appendChild(i),e.appendChild(l),e}switch(){const e=this.firstChild,t=[].slice.call(e.querySelectorAll("input")),s=[].slice.call(e.nextElementSibling.querySelectorAll("span")),i=(this.querySelector("input.active"),this.querySelector("input:not(.active)"));s.forEach(e=>{e.classList.remove("active")}),e.classList.contains("active")?e.classList.remove("active"):e.classList.add("active"),i.classList.contains("active")?(t.forEach(e=>{e.classList.remove("active"),e.removeAttribute("checked")}),this.dispatchCustomEvent("joomla.switcher.off")):(t.forEach(e=>{e.classList.remove("active"),e.removeAttribute("checked")}),i.classList.add("active"),this.dispatchCustomEvent("joomla.switcher.on")),i.setAttribute("checked",""),e.nextElementSibling.querySelector(`.switcher-label-${i.value}`).classList.add("active")}toggle(){this.querySelector("input:not(.active)").click()}getText(e,t){return window.Joomla&&Joomla.JText&&Joomla.JText._&&"function"==typeof Joomla.JText._&&Joomla.JText._(e)?Joomla.JText._(e):t}includeCss(){if(!document.getElementById("joomla-switcher-stylesheet")){const e=document.createElement("style");e.id="joomla-switcher-stylesheet",e.innerHTML="{{stylesheet}}",document.head.appendChild(e)}}}customElements.define("joomla-switcher",SwitcherElement);