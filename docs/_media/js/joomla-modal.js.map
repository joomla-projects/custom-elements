{"version":3,"file":"joomla-modal.js","sources":["../../../src/js/modal/modal.js"],"sourcesContent":["(() => {\n  // Keycodes\n  const KEYCODE = {\n    TAB: 9,\n    ESC: 27,\n  };\n\n  customElements.define('joomla-modal', class extends HTMLElement {\n    constructor() {\n      super();\n\n      this.triggerBtn = '';\n      this.focusableElements = null;\n      this.focusableSelectors = ['a[href]', 'area[href]', 'input:not([disabled])', 'select:not([disabled])', 'textarea:not([disabled])', 'button:not([disabled])', 'iframe', 'object', 'embed', '[contenteditable]', '[tabindex]:not([tabindex^=\"-\"])'];\n      this.container = this.querySelector('.joomla-modal-dialog');\n    }\n\n    static get observedAttributes() {\n      return ['width', 'height', 'innerWidth', 'innerHeight', 'iframe'];\n    }\n\n    connectedCallback() {\n      if (!this.id) {\n        throw new Error('`Joomla-modal` requires an id');\n      }\n\n      this.title = this.getAttribute('title') || 'Modal';\n      this.setAttribute('role', 'dialog');\n      this.classList.add('fade');\n      this.iframe = this.getAttribute('iframe') || '';\n      this.width = this.getAttribute('width') || '100%';\n      this.height = this.getAttribute('height') || '600px';\n\n      if (!this.container) {\n        const cont = document.createElement('div');\n        cont.classList.add('joomla-modal-dialog');\n        cont.setAttribute('role', 'document');\n        cont.innerHTML = this.innerHTML;\n        this.innerHTML = '';\n        this.appendChild(cont);\n        this.container = this.querySelector('.joomla-modal-dialog');\n      }\n\n      this.header = this.querySelector('header');\n      this.main = this.querySelector('section');\n      this.footer = this.querySelector('footer');\n\n      this.setAttribute('tabindex', -1);\n\n      // Unique Id\n      const randomId = `modal-title-${new Date().getUTCMilliseconds()}`;\n      this.setAttribute('aria-labelledby', randomId);\n\n      if (!this.header) {\n        const htag = document.createElement('h5');\n        htag.innerText = this.title;\n        htag.id = randomId;\n        const closeButton = document.createElement('button');\n        closeButton.setAttribute('aria-label', 'Close');\n        closeButton.setAttribute('data-dismiss', '');\n        closeButton.innerHTML = '<span aria-hidden=\"true\">Ã—</span>';\n\n        const header = document.createElement('header');\n\n        header.appendChild(htag);\n        header.appendChild(closeButton);\n\n        this.container.insertAdjacentElement('afterbegin', header);\n      }\n      this.header = this.container.querySelector('header');\n      this.body = this.container.querySelector('section');\n      this.footer = this.container.querySelector('footer');\n\n      this.triggerBtn = document.querySelector(`[data-href=\"#${this.id}\"]`);\n      if (this.triggerBtn) {\n        this.triggerBtn.addEventListener('click', this.open.bind(this));\n      }\n    }\n\n    disconnectedCallback() {\n      if (this.triggerBtn) {\n        this.triggerBtn.removeEventListener('click', this.open);\n      }\n    }\n\n    open() {\n      const dropShadow = document.createElement('div');\n      dropShadow.classList.add('modal-backdrop', 'fade');\n      dropShadow.classList.add('modal-backdrop', 'show');\n      document.body.appendChild(dropShadow);\n\n      this.removeAttribute('aria-hidden');\n      // Iframe specific code, reload\n      if (this.body) {\n        this.iframeEl = this.main.querySelector('iframe');\n        if (this.iframe) {\n          if (this.iframeEl) {\n            this.iframeEl.parentNode.remove(this.iframeEl);\n          }\n          const newIframe = document.createElement('iframe');\n          newIframe.width = this.width;\n          newIframe.height = this.height;\n          newIframe.src = this.iframe;\n          newIframe.setAttribute('frameborder', 0);\n          this.body.appendChild(newIframe);\n          this.iframeEl = this.main.querySelector('iframe');\n        }\n      }\n\n      // Adjust the dimensions\n      this.adjustDimensions();\n\n      this.scrollTop = 0;\n      this.classList.add('show');\n\n      this.focusableElements = [].slice.call(this.querySelectorAll(this.focusableSelectors.join()));\n      if (this.focusableElements.length) {\n        this.focusableElements[0].focus();\n      } else {\n        this.header.querySelector('button').focus();\n      }\n\n      this.evKeypress = this.keyPress.bind(this);\n      this.evClose = this.close.bind(this);\n      this.evDocumentClose = this.documentClose.bind(this);\n\n      // Keyboard handling\n      this.addEventListener('keydown', this.evKeypress);\n\n      // Close on click outside the modal\n      document.addEventListener('click', this.evDocumentClose);\n\n      // Is there a close button?\n      const modalButtons = [].slice.call(this.querySelectorAll('[data-dismiss]'));\n      // Add listeners for close\n      modalButtons.forEach((modalButton) => {\n        modalButton.addEventListener('click', this.evClose);\n      });\n    }\n\n    close() {\n      this.removeEventListener('keydown', this.evKeypress);\n      document.removeEventListener('click', this.evDocumentClose);\n\n      // Is there a close button?\n      const modalButtons = [].slice.call(this.querySelectorAll('[data-dismiss]'));\n      // Add listeners for close\n      modalButtons.forEach((modalButton) => {\n        modalButton.removeEventListener('click', this.evClose);\n      });\n\n      const dropShadow = document.querySelector('.modal-backdrop');\n      if (dropShadow) document.body.removeChild(dropShadow);\n      this.setAttribute('aria-hidden', 'true');\n      this.classList.remove('show');\n      this.main.innerHTML = '';\n      this.triggerBtn.focus();\n    }\n\n    documentClose(event) {\n      if (!this.findAncestorByClass(event.target, 'joomla-modal-dialog') && event.target !== this.triggerBtn) {\n        this.close();\n      }\n    }\n\n    keyPress(e) {\n      // ESC key\n      if (e.keyCode === KEYCODE.ESC) {\n        this.close();\n      }\n      // TAB key\n      if (e.keyCode === KEYCODE.TAB) {\n        // this.handleTabEvent(e);\n        // Get the index of the current active element within the modal\n        const focusedIndex = this.focusableElements.indexOf(document.activeElement);\n        // Handle TAB event if need to skip\n        // If first element is focused and shift key is in use\n        if (e.shiftKey && (focusedIndex === 0 || focusedIndex === -1)) {\n          // Focus last item within modal\n          this.focusableElements[this.focusableElements.length - 1].focus();\n          e.preventDefault();\n        }\n        // If last element is focused and shift key is not in use\n        if (!e.shiftKey && focusedIndex === this.focusableElements.length - 1) {\n          // Focus first item within modal\n          this.focusableElements[0].focus();\n          e.preventDefault();\n        }\n      }\n    }\n\n    adjustDimensions() {\n      // Legacy code\n      // Height\n      let modalHeight = this.offsetHeight;\n      modalHeight += parseInt(window.getComputedStyle(this).getPropertyValue('margin-top'), 10);\n      modalHeight += parseInt(window.getComputedStyle(this).getPropertyValue('margin-bottom'), 10);\n\n      const bodyHeight = this.body.getBoundingClientRect.height;\n      let bodyHeightOuter = this.body.offsetHeight;\n      bodyHeightOuter += parseInt(window.getComputedStyle(this.body).getPropertyValue('margin-top'), 10);\n      bodyHeightOuter += parseInt(window.getComputedStyle(this.body).getPropertyValue('margin-bottom'), 10);\n\n      let headerHeight = this.header.offsetHeight;\n      headerHeight += parseInt(window.getComputedStyle(this.header).getPropertyValue('margin-top'), 10);\n      headerHeight += parseInt(window.getComputedStyle(this.header).getPropertyValue('margin-bottom'), 10);\n\n      let footerHeight = this.footer.offsetHeight;\n      footerHeight += parseInt(window.getComputedStyle(this.footer).getPropertyValue('margin-top'), 10);\n      footerHeight += parseInt(window.getComputedStyle(this.footer).getPropertyValue('margin-bottom'), 10);\n\n      const padding = this.offsetTop;\n      const maxModalHeight = window.height - (padding * 2);\n      const modalBodyPadding = (bodyHeightOuter - bodyHeight);\n      const maxModalBodyHeight = maxModalHeight - (headerHeight + footerHeight + modalBodyPadding);\n\n      if (this.iframeEl) {\n        const iframeHeight = this.iframeEl.getBoundingClientRect().height;\n\n        if (iframeHeight > maxModalBodyHeight) {\n          this.container.style.maxHeight = maxModalBodyHeight;\n          this.container.style.overflowY = 'auto';\n          this.iframeEl.style.maxHeight = maxModalBodyHeight - modalBodyPadding;\n        }\n      } else if (modalHeight > maxModalHeight) {\n        this.container.style.maxHeight = maxModalBodyHeight;\n        this.container.style.overflowY = 'auto';\n      }\n    }\n\n    /* eslint-disable */\n    findAncestorByClass(el, className) {\n      while ((el = el.parentElement) && !el.classList.contains(className));\n      return el;\n    }\n    /* eslint-enable */\n  });\n})();\n"],"names":[],"mappings":"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"}