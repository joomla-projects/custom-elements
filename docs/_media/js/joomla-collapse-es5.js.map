{"version":3,"file":"joomla-collapse-es5.js","sources":["../../../src/js/collapse/collapse.js"],"sourcesContent":["(() => {\n  customElements.define('joomla-collapse', class extends HTMLElement {\n    static get observedAttributes() {\n      return ['state'];\n    }\n\n    get state() { return this.getAttribute('state'); }\n\n    set state(value) { return this.setAttribute('state', value); }\n\n    connectedCallback() {\n      const self = this;\n      // id is required\n      if (!this.id) return;\n\n      const linked = [].slice.call(document.querySelectorAll(`[href=\"#${this.id}\"],[data-target=\"#${this.id}\"]`));\n\n      linked.forEach((element) => {\n        if (!self.state || (self.state && self.state === 'closed')) {\n          self.state = 'closed';\n          element.setAttribute('aria-expanded', 'false');\n          element.setAttribute('aria-controls', self.id);\n        } else {\n          element.setAttribute('aria-expanded', 'true');\n          element.setAttribute('aria-controls', self.id);\n        }\n\n        element.addEventListener('click', (event) => {\n          let colId = '';\n          if (!event.target.hasAttribute('data-target')) colId = event.target.getAttribute('href').replace('#', '');\n          if (!event.target.hasAttribute('href')) colId = event.target.getAttribute('data-target').replace('#', '');\n          event.preventDefault();\n          event.stopPropagation();\n          document.getElementById(colId).toggle();\n        });\n      });\n    }\n\n    disconnectedCallback() {\n      let linked = document.querySelector(`[href=\"#${this.id}\"]`);\n      if (!linked) linked = document.querySelector(`[data-target=\"#${this.id}\"]`);\n      if (linked) {\n        linked.removeEventListener('click', this);\n      }\n    }\n\n    attributeChangedCallback(attr, oldValue, newValue) {\n      const linked = document.querySelector(`[href=\"#${this.id}\"]`);\n      switch (attr) {\n        case 'state':\n          if (newValue === 'closed') {\n            linked.setAttribute('aria-expanded', 'false');\n          } else if (newValue === 'open') {\n            linked.setAttribute('aria-expanded', 'true');\n          }\n          break;\n        default:\n          break;\n      }\n    }\n\n    toggle() {\n      let linked = document.querySelector(`[href=\"#${this.id}\"]`);\n      if (!linked) linked = document.querySelector(`[data-target=\"#${this.id}\"]`);\n      if (this.state === 'closed') {\n        this.state = 'open';\n        linked.setAttribute('aria-expanded', 'true');\n      } else {\n        this.state = 'closed';\n        linked.setAttribute('aria-expanded', 'false');\n      }\n    }\n  });\n})();\n"],"names":["customElements","define","self","id","linked","slice","call","document","querySelectorAll","forEach","element","state","setAttribute","addEventListener","event","colId","target","hasAttribute","getAttribute","replace","preventDefault","stopPropagation","getElementById","toggle","querySelector","removeEventListener","attr","oldValue","newValue","value","HTMLElement"],"mappings":"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"}