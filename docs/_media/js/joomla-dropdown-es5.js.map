{"version":3,"file":"joomla-dropdown-es5.js","sources":["../../../src/js/dropdown/dropdown.js"],"sourcesContent":["(() => {\n  class JoomlaDropdownElement extends HTMLElement {\n    /* Attributes to monitor */\n    static get observedAttributes() {\n      return ['for'];\n    }\n\n    get for() { return this.getAttribute('for'); }\n\n    set for(value) { return this.setAttribute('for', value); }\n\n    connectedCallback() {\n      this.setAttribute('aria-labelledby', this.for.substring(1));\n      const button = document.querySelector(this.for);\n      const innerLinks = this.querySelectorAll('a');\n\n      if (!button.id) {\n        return;\n      }\n      // var children = [].slice.call( menu[getElementsByTagName]('*'));\n      // this.classList.add('dropdown');\n\n      button.setAttribute('aria-haspopup', true);\n      button.setAttribute('aria-expanded', false);\n\n      button.addEventListener('click', (event) => {\n        if (this.hasAttribute('expanded')) {\n          this.removeAttribute('expanded');\n          event.target.setAttribute('aria-expanded', false);\n        } else {\n          this.setAttribute('expanded', '');\n          event.target.setAttribute('aria-expanded', true);\n        }\n\n        document.addEventListener('click', (evt) => {\n          if (evt.target !== button) {\n            if (!this.findAncestor(evt.target, 'joomla-dropdown')) {\n              this.close();\n            }\n          }\n        });\n\n        innerLinks.forEach((innerLink) => {\n          innerLink.addEventListener('click', () => {\n            this.close();\n          });\n        });\n      });\n    }\n\n    /*eslint-disable */\n    /* Method to dispatch events */\n    dispatchCustomEvent(eventName) {\n      const OriginalCustomEvent = new CustomEvent(eventName);\n      OriginalCustomEvent.relatedTarget = this;\n      this.dispatchEvent(OriginalCustomEvent);\n      this.removeEventListener(eventName, this);\n    }\n\n    adoptedCallback(oldDocument, newDocument) { }\n\n\n    attributeChangedCallback(attr, oldValue, newValue) {\n      switch (attr) {\n        // case 'name':\n        // console.log(newValue);\n        // break;\n      }\n    }\n    /* eslint-enable */\n\n    close() {\n      const button = document.querySelector(`#${this.getAttribute('aria-labelledby')}`);\n      this.removeAttribute('expanded');\n      button.setAttribute('aria-expanded', false);\n    }\n\n    /* eslint-disable */\n    findAncestor(el, tagName) {\n      while ((el = el.parentElement) && el.nodeName.toLowerCase() !== tagName);\n      return el;\n    }\n    /* eslint-enable */\n  }\n\n  customElements.define('joomla-dropdown', JoomlaDropdownElement);\n})();\n"],"names":["JoomlaDropdownElement","setAttribute","for","substring","button","document","querySelector","innerLinks","querySelectorAll","id","addEventListener","event","hasAttribute","removeAttribute","target","evt","findAncestor","close","forEach","innerLink","eventName","OriginalCustomEvent","CustomEvent","relatedTarget","dispatchEvent","removeEventListener","oldDocument","newDocument","attr","oldValue","newValue","getAttribute","el","tagName","parentElement","nodeName","toLowerCase","value","HTMLElement","customElements","define"],"mappings":"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"}