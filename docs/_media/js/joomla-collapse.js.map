{"version":3,"file":"joomla-collapse.js","sources":["../../../src/js/collapse/collapse.js"],"sourcesContent":["(() => {\n  customElements.define('joomla-collapse', class extends HTMLElement {\n    static get observedAttributes() {\n      return ['state'];\n    }\n\n    get state() { return this.getAttribute('state'); }\n\n    set state(value) { return this.setAttribute('state', value); }\n\n    connectedCallback() {\n      const self = this;\n      // id is required\n      if (!this.id) return;\n\n      const linked = [].slice.call(document.querySelectorAll(`[href=\"#${this.id}\"],[data-target=\"#${this.id}\"]`));\n\n      linked.forEach((element) => {\n        if (!self.state || (self.state && self.state === 'closed')) {\n          self.state = 'closed';\n          element.setAttribute('aria-expanded', 'false');\n          element.setAttribute('aria-controls', self.id);\n        } else {\n          element.setAttribute('aria-expanded', 'true');\n          element.setAttribute('aria-controls', self.id);\n        }\n\n        element.addEventListener('click', (event) => {\n          let colId = '';\n          if (!event.target.hasAttribute('data-target')) colId = event.target.getAttribute('href').replace('#', '');\n          if (!event.target.hasAttribute('href')) colId = event.target.getAttribute('data-target').replace('#', '');\n          event.preventDefault();\n          event.stopPropagation();\n          document.getElementById(colId).toggle();\n        });\n      });\n    }\n\n    disconnectedCallback() {\n      let linked = document.querySelector(`[href=\"#${this.id}\"]`);\n      if (!linked) linked = document.querySelector(`[data-target=\"#${this.id}\"]`);\n      if (linked) {\n        linked.removeEventListener('click', this);\n      }\n    }\n\n    attributeChangedCallback(attr, oldValue, newValue) {\n      const linked = document.querySelector(`[href=\"#${this.id}\"]`);\n      switch (attr) {\n        case 'state':\n          if (newValue === 'closed') {\n            linked.setAttribute('aria-expanded', 'false');\n          } else if (newValue === 'open') {\n            linked.setAttribute('aria-expanded', 'true');\n          }\n          break;\n        default:\n          break;\n      }\n    }\n\n    toggle() {\n      let linked = document.querySelector(`[href=\"#${this.id}\"]`);\n      if (!linked) linked = document.querySelector(`[data-target=\"#${this.id}\"]`);\n      if (this.state === 'closed') {\n        this.state = 'open';\n        linked.setAttribute('aria-expanded', 'true');\n      } else {\n        this.state = 'closed';\n        linked.setAttribute('aria-expanded', 'false');\n      }\n    }\n  });\n})();\n"],"names":[],"mappings":"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"}