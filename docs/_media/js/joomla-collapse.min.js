class JoomlaCollapseElement extends HTMLElement{static get observedAttributes(){return["state"]}get state(){return this.getAttribute("state")}set state(t){return this.setAttribute("state",t)}constructor(){if(super(),!document.getElementById("joomla-collapse-stylesheet")){const t=document.createElement("style");t.id="joomla-collapse-stylesheet",t.innerText=`joomla-collapse[state=closed]{display:none}joomla-collapse[state=open]{display:block}`,document.head.appendChild(t)}}connectedCallback(){const t=this;this.id&&[].slice.call(document.querySelectorAll(`[href="#${this.id}"],[data-target="#${this.id}"]`)).forEach(e=>{!t.state||t.state&&"closed"===t.state?(t.state="closed",e.setAttribute("aria-expanded","false"),e.setAttribute("aria-controls",t.id)):(e.setAttribute("aria-expanded","true"),e.setAttribute("aria-controls",t.id)),e.addEventListener("click",t=>{let e="";t.target.hasAttribute("data-target")||(e=t.target.getAttribute("href").replace("#","")),t.target.hasAttribute("href")||(e=t.target.getAttribute("data-target").replace("#","")),t.preventDefault(),t.stopPropagation(),document.getElementById(e).toggle()})})}disconnectedCallback(){let t=document.querySelector(`[href="#${this.id}"]`);t||(t=document.querySelector(`[data-target="#${this.id}"]`)),t&&t.removeEventListener("click",this)}attributeChangedCallback(t,e,a){const s=document.querySelector(`[href="#${this.id}"]`);switch(t){case"state":"closed"===a?s.setAttribute("aria-expanded","false"):"open"===a&&s.setAttribute("aria-expanded","true")}}toggle(){let t=document.querySelector(`[href="#${this.id}"]`);t||(t=document.querySelector(`[data-target="#${this.id}"]`)),"closed"===this.state?(this.state="open",t.setAttribute("aria-expanded","true")):(this.state="closed",t.setAttribute("aria-expanded","false"))}}customElements.define("joomla-collapse",JoomlaCollapseElement);