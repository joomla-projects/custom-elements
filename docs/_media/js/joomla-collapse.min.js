class CollapseElement extends HTMLElement{static get observedAttributes(){return["state"]}get state(){return this.getAttribute("state")||"closed"}set state(t){return this.setAttribute("state",t)}constructor(t){super(),this.includeCss()}connectedCallback(){if(!this.id)return;const t=document.querySelectorAll(`[href="#${this.id}"],[data-target="#${this.id}"]`);for(let e=0,s=t.length;e<s;e++)this.state&&"closed"!==this.state?(t[e].setAttribute("aria-expanded","true"),t[e].setAttribute("aria-controls",this.id)):(t[e].setAttribute("aria-expanded","false"),t[e].setAttribute("aria-controls",this.id)),t[e].addEventListener("click",t=>{let e="";t.target.hasAttribute("data-target")||(e=t.target.getAttribute("href").replace("#","")),t.target.hasAttribute("href")||(e=t.target.getAttribute("data-target").replace("#","")),t.preventDefault(),t.stopPropagation(),document.getElementById(e).toggle()})}disconnectedCallback(){let t=document.querySelector(`[href="#${this.id}"]`);t||(t=document.querySelector(`[data-target="#${this.id}"]`)),t&&t.removeEventListener("click",this)}attributeChangedCallback(t,e,s){switch(t){case"state":const e=document.querySelector(`[href="#${this.id}"]`);"closed"===s?e.setAttribute("aria-expanded","false"):"open"===s&&e.setAttribute("aria-expanded","true")}}toggle(){let t=document.querySelector(`[href="#${this.id}"]`);t||(t=document.querySelector(`[data-target="#${this.id}"]`)),"closed"===this.state?(this.state="open",t.setAttribute("aria-expanded","true")):(this.state="closed",t.setAttribute("aria-expanded","false"))}includeCss(){if(console.log("ffff"),!document.getElementById("joomla-collapse-stylesheet")){console.log("ssss");const t=document.createElement("style");t.id="joomla-collapse-stylesheet",t.innerHTML=`joomla-collapse[state=closed]{display:none}joomla-collapse[state=open]{display:block}`,document.head.appendChild(t)}}}customElements.define("joomla-collapse",CollapseElement);