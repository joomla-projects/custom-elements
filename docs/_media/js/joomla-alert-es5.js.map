{"version":3,"file":"joomla-alert-es5.js","sources":["../../../src/js/alert/alert.js"],"sourcesContent":["(() => {\n  class JoomlaAlertElement extends HTMLElement {\n    /* Attributes to monitor */\n    static get observedAttributes() { return ['type', 'role', 'dismiss', 'acknowledge', 'href']; }\n\n    get type() { return this.getAttribute('type'); }\n\n    set type(value) { return this.setAttribute('type', value); }\n\n    get role() { return this.getAttribute('role'); }\n\n    set role(value) { return this.setAttribute('role', value); }\n\n    get dismiss() { return this.getAttribute('dismiss'); }\n\n    get autodismiss() { return this.getAttribute('auto-dismiss'); }\n\n    get acknowledge() { return this.getAttribute('acknowledge'); }\n\n    get href() { return this.getAttribute('href'); }\n\n    /* Lifecycle, element appended to the DOM */\n    connectedCallback() {\n      this.classList.add('joomla-alert--show');\n\n      // Default to info\n      if (!this.type || ['info', 'warning', 'danger', 'success'].indexOf(this.type) === -1) {\n        this.setAttribute('type', 'info');\n      }\n      // Default to alert\n      if (!this.role || ['alert', 'alertdialog'].indexOf(this.role) === -1) {\n        this.setAttribute('role', 'alert');\n      }\n      // Append button\n      if ((this.hasAttribute('dismiss') || this.hasAttribute('acknowledge')) || ((this.hasAttribute('href') && this.getAttribute('href') !== '')\n        && !this.querySelector('button.joomla-alert--close') && !this.querySelector('button.joomla-alert-button--close'))) {\n        this.appendCloseButton();\n      }\n\n      if (this.hasAttribute('auto-dismiss')) {\n        this.autoDismiss();\n      }\n\n      this.dispatchCustomEvent('joomla.alert.show');\n    }\n\n    /* Lifecycle, element removed from the DOM */\n    disconnectedCallback() {\n      this.removeEventListener('joomla.alert.show', this);\n      this.removeEventListener('joomla.alert.close', this);\n      this.removeEventListener('joomla.alert.closed', this);\n\n      if (this.firstChild.tagName && this.firstChild.tagName.toLowerCase() === 'button') {\n        this.firstChild.removeEventListener('click', this);\n      }\n    }\n\n    /* Respond to attribute changes */\n    attributeChangedCallback(attr, oldValue, newValue) {\n      switch (attr) {\n        case 'type':\n          if (!newValue || (newValue && ['info', 'warning', 'danger', 'success'].indexOf(newValue) === -1)) {\n            this.type = 'info';\n          }\n          break;\n        case 'role':\n          if (!newValue || (newValue && ['alert', 'alertdialog'].indexOf(newValue) === -1)) {\n            this.role = 'alert';\n          }\n          break;\n        case 'dismiss':\n        case 'acknowledge':\n          if (!newValue || newValue === 'true') {\n            this.appendCloseButton();\n          } else {\n            this.removeCloseButton();\n          }\n          break;\n        case 'auto-dismiss':\n          this.autoDismiss();\n          break;\n        case 'href':\n          if (!newValue || newValue === '') {\n            this.removeCloseButton();\n          } else if (!this.querySelector('button.joomla-alert-button--close')) {\n            this.appendCloseButton();\n          }\n          break;\n        default:\n          break;\n      }\n    }\n\n    markAlertClosed(element) {\n      this.dispatchCustomEvent('joomla.alert.closed');\n      if (element) {\n        element.parentNode.removeChild(element);\n      } else {\n        this.remove();\n      }\n    }\n\n    /* Method to close the alert */\n    close(element = null) {\n      this.dispatchCustomEvent('joomla.alert.close');\n      if (window.matchMedia('(prefers-reduced-motion)').matches) {\n        this.markAlertClosed(element);\n      } else {\n        this.addEventListener('transitionend', () => this.markAlertClosed(element), false);\n      }\n      this.classList.remove('joomla-alert--show');\n    }\n\n    /* Method to dispatch events */\n    dispatchCustomEvent(eventName) {\n      const OriginalCustomEvent = new CustomEvent(eventName);\n      OriginalCustomEvent.relatedTarget = this;\n      this.dispatchEvent(OriginalCustomEvent);\n      this.removeEventListener(eventName, this);\n    }\n\n    /* Method to create the close button */\n    appendCloseButton() {\n      if (this.querySelector('button.joomla-alert--close') || this.querySelector('button.joomla-alert-button--close')) {\n        return;\n      }\n\n      const self = this;\n      const closeButton = document.createElement('button');\n\n      if (this.hasAttribute('dismiss')) {\n        closeButton.classList.add('joomla-alert--close');\n        closeButton.innerHTML = '<span aria-hidden=\"true\">&times;</span>';\n        closeButton.setAttribute('aria-label', this.getText('JCLOSE', 'Close'));\n      } else {\n        closeButton.classList.add('joomla-alert-button--close');\n        if (this.hasAttribute('acknowledge')) {\n          closeButton.innerHTML = this.getText('JOK', 'ok');\n        } else {\n          closeButton.innerHTML = this.getText('JOPEN', 'Open');\n        }\n      }\n\n      if (this.firstChild) {\n        this.insertBefore(closeButton, this.firstChild);\n      } else {\n        this.appendChild(closeButton);\n      }\n\n      /* Add the required listener */\n      if (closeButton) {\n        if (!this.href) {\n          closeButton.addEventListener('click', () => {\n            self.dispatchCustomEvent('joomla.alert.buttonClicked');\n            if (self.getAttribute('data-callback')) {\n              window[self.getAttribute('data-callback')]();\n              self.close();\n            } else {\n              self.close();\n            }\n          });\n        } else {\n          closeButton.addEventListener('click', () => {\n            self.dispatchCustomEvent('joomla.alert.buttonClicked');\n            window.location.href = self.href;\n            self.close();\n          });\n        }\n      }\n    }\n\n    /* Method to auto-dismiss */\n    autoDismiss() {\n      const self = this;\n      setTimeout(() => {\n        self.dispatchCustomEvent('joomla.alert.buttonClicked');\n        if (self.hasAttribute('data-callback')) {\n          window[self.getAttribute('data-callback')]();\n        } else {\n          self.close(self);\n        }\n      }, parseInt(self.getAttribute('auto-dismiss'), 10) ? self.getAttribute('auto-dismiss') : 3000);\n    }\n\n    /* Method to remove the close button */\n    removeCloseButton() {\n      const button = this.querySelector('button');\n      if (button) {\n        button.removeEventListener('click', this);\n        button.parentNode.removeChild(button);\n      }\n    }\n\n    /* Method to get the translated text */\n    getText(str, fallback) {\n      // TODO: Remove coupling to Joomla CMS Core JS here\n      /* eslint-disable-next-line no-undef */\n      return (window.Joomla && Joomla.JText && Joomla.JText._ && typeof Joomla.JText._ === 'function' && Joomla.JText._(str)) ? Joomla.JText._(str) : fallback;\n    }\n  }\n\n  customElements.define('joomla-alert', JoomlaAlertElement);\n})();\n"],"names":["JoomlaAlertElement","classList","add","type","indexOf","setAttribute","role","hasAttribute","getAttribute","querySelector","appendCloseButton","autoDismiss","dispatchCustomEvent","removeEventListener","firstChild","tagName","toLowerCase","attr","oldValue","newValue","removeCloseButton","element","parentNode","removeChild","remove","window","matchMedia","matches","markAlertClosed","addEventListener","eventName","OriginalCustomEvent","CustomEvent","relatedTarget","dispatchEvent","self","closeButton","document","createElement","innerHTML","getText","insertBefore","appendChild","href","close","location","setTimeout","parseInt","button","str","fallback","Joomla","JText","_","value","HTMLElement","customElements","define"],"mappings":"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"}