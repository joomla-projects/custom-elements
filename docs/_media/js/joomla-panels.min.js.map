{"version":3,"file":"joomla-panels.min.js","sources":["../../../src/js/panels/panels.js"],"sourcesContent":["(() => {\n  customElements.define('joomla-panels', class extends HTMLElement {\n    /* Attributes to monitor */\n    static get observedAttributes() { return ['recall', 'orientation', 'view', 'responsive', 'collapse-width']; }\n\n    get recall() { return this.getAttribute('recall'); }\n\n    set recall(value) { return this.setAttribute('recall', value); }\n\n    get view() { return this.getAttribute('view'); }\n\n    set view(value) { this.setAttribute('view', value); }\n\n    get orientation() { return this.getAttribute('orientation') || 'horizontal'; }\n\n    set orientation(value) { this.setAttribute('orientation', value); }\n\n    get responsive() { return this.getAttribute('responsive'); }\n\n    set responsive(value) { this.setAttribute('responsive', value); }\n\n    get collapseWidth() { return this.getAttribute('collapse-width'); }\n\n    set collapseWidth(value) { this.setAttribute('collapse-width', value); }\n\n    /* Lifecycle, element created */\n    constructor() {\n      super();\n\n      // Setup configuration\n      this.hasActive = false;\n      this.currentActive = '';\n      this.hasNested = false;\n      this.isNested = false;\n      this.tabs = [];\n      this.tabsLinks = [];\n      this.panels = [];\n      this.tabLinkHash = [];\n    }\n\n    /* Lifecycle, element appended to the DOM */\n    connectedCallback() {\n      if (!this.orientation || (this.orientation && ['horizontal', 'vertical'].indexOf(this.orientation) === -1)) {\n        this.setAttribute('orientation', 'horizontal');\n      }\n\n      this.view = this.getAttribute('view') || 'tabs';\n      this.recall = this.recall || 'false';\n      this.responsive = this.getAttribute('responsive') || 'false';\n      this.collapseWidth = this.getAttribute('collapseWidth') || 0;\n\n      // Get tab elements\n      this.panels = [].slice.call(this.querySelectorAll('section'));\n\n      // Sanity check\n      if (!this.panels.length) {\n        throw new Error('`Joomla-panels` require one ore more panels!');\n      }\n\n      // Is this nested\n      if (this.findAncestorByTagNme(this, 'joomla-tab')) {\n        this.isNested = true;\n      }\n\n      // Does it have child tab element\n      if (this.querySelector('joomla-tab')) {\n        this.hasNested = true;\n      }\n\n      // Use the sessionStorage state!\n      if (this.recall) {\n        const href = sessionStorage.getItem(this.getStorageKey());\n        // Do not fail on 3.x tab state values hack\n        if (href && !/@\\[/.test(href)) {\n          this.tabLinkHash.push(href);\n        }\n        this.setTabState();\n      }\n\n      // Create the navigation\n      if (this.firstElementChild.tagName !== 'ul') {\n        this.createNavigation();\n      }\n\n      // Add missing A11Y\n      this.panels.forEach((tab) => {\n        tab.setAttribute('role', 'tabpanel');\n        this.tabs.push(`#tab-${tab.id}`);\n        if (tab.hasAttribute('active')) {\n          this.hasActive = true;\n          this.currentActive = tab.id;\n          this.querySelector(`#tab-${tab.id}`).setAttribute('aria-selected', 'true');\n          this.querySelector(`#tab-${tab.id}`).setAttribute('active', '');\n          this.querySelector(`#tab-${tab.id}`).setAttribute('tabindex', '0');\n        }\n      });\n\n      // Fallback if no active tab\n      if (!this.hasActive) {\n        this.tabsLinks[0].setAttribute('active', '');\n        this.hasActive = true;\n        this.currentActive = this.panels[0].id;\n        this.tabsLinks[0].setAttribute('aria-selected', 'true');\n        this.tabsLinks[0].setAttribute('tabindex', '0');\n        this.tabsLinks[0].setAttribute('active', '');\n        this.panels[0].setAttribute('active', '');\n      }\n\n      // Check if there is a hash in the URI\n      if (window.location.href.match(/#tab-/)) {\n        // this.activateUriHash();\n      }\n\n      if (this.view === 'accordion') {\n        this.toAccordion.bind(this)();\n      }\n\n      if (this.responsive === 'true') {\n        // Convert tabs to accordian and vice versa\n        this.changeView.bind(this);\n\n        // Add behavior for window size change\n        window.addEventListener('resize', this.changeView.bind(this));\n      }\n    }\n\n    /* Lifecycle, element removed from the DOM */\n    disconnectedCallback() {\n      const self = this;\n      const ulEl = this.querySelector('ul');\n      const navigation = [].slice.call(ulEl.querySelectorAll('a'));\n\n      navigation.forEach((link) => {\n        link.removeEventListener('click', self.activateTabFromLink, true);\n      });\n\n      ulEl.removeEventListener('keydown', self.keyBehaviour, true);\n    }\n\n    /* Method to create the tabs navigation */\n    createNavigation() {\n      const self = this;\n      let nav = '';\n\n      if (this.firstElementChild.tagName.toLowerCase() !== 'ul') {\n        nav = document.createElement('ul');\n      }\n\n      nav.setAttribute('role', 'tablist');\n      this.panels.forEach((panel) => {\n        if (!panel.id) {\n          throw new Error('`joomla-panels` All panels require an ID');\n        }\n\n        if (panel.parentNode !== this) {\n          return;\n        }\n\n        const active = panel.getAttribute('active') || false;\n        const liElement = document.createElement('li');\n        const aElement = document.createElement('a');\n\n        liElement.setAttribute('role', 'presentation');\n        aElement.setAttribute('role', 'tab');\n        aElement.setAttribute('aria-controls', panel.id);\n        aElement.setAttribute('aria-selected', active ? 'true' : 'false');\n        aElement.setAttribute('tabindex', active ? '0' : '-1');\n        aElement.setAttribute('href', `#${panel.id}`);\n        aElement.setAttribute('id', `tab-${panel.id}`);\n        aElement.innerHTML = panel.getAttribute('name');\n\n        if (active) {\n          aElement.setAttribute('active', '');\n        }\n\n        aElement.addEventListener('click', self.activateTabFromLink.bind(self));\n        this.tabsLinks.push(aElement);\n\n        liElement.append(aElement);\n        nav.append(liElement);\n\n        panel.setAttribute('aria-labelledby', `tab-${panel.id}`);\n\n        if (!active) {\n          panel.setAttribute('aria-hidden', 'true');\n        }\n      });\n\n      this.insertAdjacentElement('afterbegin', nav);\n\n      // Keyboard access\n      this.querySelector('ul').addEventListener('keydown', this.keyBehaviour.bind(this));\n    }\n\n    hideCurrent() {\n      // Unset the current active tab\n      if (this.currentActive) {\n        // Emit hide event\n        const el = this.querySelector(`a[aria-controls=\"${this.currentActive}\"]`);\n        this.dispatchCustomEvent('joomla.tab.hide', el, this.querySelector(`#tab-${this.currentActive}`));\n        el.removeAttribute('active');\n        el.setAttribute('tabindex', '-1');\n        this.querySelector(`#${this.currentActive}`).removeAttribute('active');\n        this.querySelector(`#${this.currentActive}`).setAttribute('aria-hidden', 'true');\n        el.removeAttribute('aria-selected');\n        // Emit hidden event\n        this.dispatchCustomEvent('joomla.tab.hidden', el, this.querySelector(`#tab-${this.currentActive}`));\n      }\n    }\n\n    /** Activate Tab */\n    activateTabFromLink(e) {\n      e.preventDefault();\n      const currentTabLink = this.currentActive;\n\n      if (this.hasActive) {\n        this.hideCurrent();\n      }\n\n      // Set the selected tab as active\n      // Emit show event\n      this.dispatchCustomEvent('joomla.tab.show', e.target, this.querySelector(`#tab-${currentTabLink}`));\n      e.target.setAttribute('active', '');\n      e.target.setAttribute('aria-selected', 'true');\n      e.target.setAttribute('tabindex', '0');\n      this.querySelector(e.target.hash).setAttribute('active', '');\n      this.querySelector(e.target.hash).removeAttribute('aria-hidden');\n      this.currentActive = e.target.hash.substring(1);\n      // Emit shown event\n      this.dispatchCustomEvent('joomla.tab.shown', e.target, this.querySelector(`#tab-${currentTabLink}`));\n      this.saveState(`#tab-${e.target.hash.substring(1)}`);\n    }\n\n    showTab(tab) {\n      const tabLink = document.querySelector(`#tab-${tab.id}`);\n      tabLink.click();\n    }\n\n    show(ulLink) {\n      ulLink.click();\n    }\n\n    keyBehaviour(e) {\n      // collect tab targets, and their parents' prev/next (or first/last)\n      const currentTab = this.querySelector(`#tab-${this.currentActive}`);\n\n      const previousTabItem = currentTab.parentNode.previousElementSibling\n        || currentTab.parentNode.parentNode.lastElementChild;\n      const nextTabItem = currentTab.parentNode.nextElementSibling\n        || currentTab.parentNode.parentNode.firstElementChild;\n\n      // Don't catch key events when âŒ˜ or Alt modifier is present\n      if (e.metaKey || e.altKey) {\n        return;\n      }\n\n      if (this.tabs.indexOf(`#${document.activeElement.id}`) === -1) {\n        return;\n      }\n\n      // catch left/right and up/down arrow key events\n      switch (e.keyCode) {\n        case 37:\n        case 38:\n          e.preventDefault();\n          e.stopPropagation();\n          previousTabItem.querySelector('a').click();\n          previousTabItem.querySelector('a').focus();\n          break;\n        case 39:\n        case 40:\n          e.preventDefault();\n          e.stopPropagation();\n          nextTabItem.querySelector('a').click();\n          nextTabItem.querySelector('a').focus();\n          break;\n        default:\n          break;\n      }\n    }\n\n    /* eslint-disable */\n    getStorageKey() {\n      return window.location.href.toString().split(window.location.host)[1].replace(/&return=[a-zA-Z0-9%]+/, '').split('#')[0];\n    }\n    /* eslint-disable */\n\n    saveState(value) {\n      const storageKey = this.getStorageKey();\n      sessionStorage.setItem(storageKey, value);\n    }\n\n    setTabState() {\n      const self = this;\n      const tabs = this.tabsLinks;\n\n      if (this.hasNested) {\n        // Add possible parent tab to the aray for activation\n        if (this.tabLinkHash.length && this.tabLinkHash[0] !== '') {\n          const hash = this.tabLinkHash[0].substring(5);\n          const element = this.querySelector(`${hash}`);\n\n          // Add the parent tab to the array for activation\n          if (element) {\n            const currentTabSet = this.findAncestorByTagNme(element, 'joomla-tab');\n            const parentTabSet = this.findAncestorByTagNme(currentTabSet, 'joomla-tab');\n\n            if (parentTabSet) {\n              const parentTab = this.findAncestorByTagNme(currentTabSet, 'section');\n              if (parentTab) {\n                this.tabLinkHash.push(`#tab-${parentTab.id}`);\n              }\n            }\n          }\n        }\n\n        // Remove the cascaded tabs and activate the right tab\n        tabs.forEach((tab) => {\n          if (this.tabLinkHash.length) {\n            const theId = `#tab-${tab.id}`;\n\n            if (this.tabLinkHash.indexOf(theId) === -1) {\n              tab.removeAttribute('active');\n            } else {\n              tab.setAttribute('active', '');\n            }\n          }\n\n          if (tab.parentNode === self) {\n            this.tabsLinks.push(tab);\n          }\n        });\n      } else {\n        // Activate the correct tab\n        tabs.forEach((tab) => {\n          if (this.tabLinkHash.length) {\n            const theId = `#tab-${tab.hash}`;\n            if (this.tabLinkHash.indexOf(theId) > -1) {\n              tab.removeAttribute('active');\n            } else {\n              tab.setAttribute('active', '');\n            }\n          }\n        });\n\n        this.tabsLinks = tabs;\n      }\n    }\n\n    toTabs() {\n      const self = this;\n      // remove the cascaded tabs\n      for (let i = 0, l = this.panels.length; i < l; ++i) {\n        if (this.panels[i].parentNode.parentNode.parentNode === this) {\n          this.tabsLinks.push(this.panels[i]);\n        }\n      }\n\n      if (this.tabsLinks.length) {\n        this.tabsLinks.forEach((panel) => {\n          self.appendChild(panel);\n        });\n      }\n    }\n\n    toAccordion() {\n      const self = this;\n      // remove the cascaded tabs\n      // for (let i = 0, l = this.panels.length; i < l; ++i) {\n      //   if (this.panels[i].parentNode === this) {\n      //     this.tabsLinks.push(this.panels[i]);\n      //   }\n      // }\n\n      if (this.panels.length) {\n        this.panels.forEach((panel) => {\n          const link = self.querySelector('a[aria-controls=\"' + panel.id + '\"]')\n          // if (link.parentNode.parentNode === self.firstElementChild)\n          link.parentNode.appendChild(panel);\n        });\n      }\n    }\n\n    /** Method to convert tabs to accordion and vice versa depending on screen size */\n    changeView() {\n      if (window.outerWidth > 920) {\n        if (this.view === 'tabs') {\n          return;\n        }\n        // convert to tabs\n        this.toTabs.bind(this);\n        this.view = 'tabs'\n      } else {\n        if (this.view === 'accordion') {\n          return;\n        }\n        // convert to accordion\n        this.toAccordion.bind(this);\n        this.view = 'accordion'\n      }\n    }\n\n    activateUriHash() {\n      const hash = window.location.href.match(/#\\S[^&]*/);\n      const element = this.querySelector(hash[0]);\n\n      if (element) {\n        // Activate any parent tabs (nested tables)\n        const currentTabSet = this.findAncestorByTagNme(element, 'joomla-tab');\n        const parentTabSet = this.findAncestorByTagNme(currentTabSet, 'joomla-tab');\n\n        if (parentTabSet) {\n          const parentTab = this.findAncestorByTagNme(currentTabSet, 'section');\n          parentTabSet.showTab(parentTab);\n          // Now activate the given tab\n          this.show(element);\n        } else {\n          // Now activate the given tab\n          this.showTab(element);\n        }\n      }\n    }\n    /* eslint-disable */\n    findAncestorByTagNme(el, tagName) {\n      while ((el = el.parentElement) && el.nodeName.toLowerCase() !== tagName);\n      return el;\n    }\n    /* eslint-enable */\n\n    /* Method to dispatch events */\n    dispatchCustomEvent(eventName, element, related) {\n      const OriginalCustomEvent = new CustomEvent(eventName, { bubbles: true, cancelable: true });\n      if (related) {\n        OriginalCustomEvent.relatedTarget = related;\n      }\n\n      element.dispatchEvent(OriginalCustomEvent);\n      element.removeEventListener(eventName, element);\n    }\n  });\n})();\n"],"names":["customElements","define","HTMLElement","observedAttributes","recall","this","getAttribute","value","setAttribute","view","orientation","responsive","collapseWidth","[object Object]","super","hasActive","currentActive","hasNested","isNested","tabs","tabsLinks","panels","tabLinkHash","indexOf","slice","call","querySelectorAll","length","Error","findAncestorByTagNme","querySelector","href","sessionStorage","getItem","getStorageKey","test","push","setTabState","firstElementChild","tagName","createNavigation","forEach","tab","id","hasAttribute","window","location","match","toAccordion","bind","changeView","addEventListener","self","ulEl","link","removeEventListener","activateTabFromLink","keyBehaviour","nav","toLowerCase","document","createElement","panel","parentNode","active","liElement","aElement","innerHTML","append","insertAdjacentElement","el","dispatchCustomEvent","removeAttribute","e","preventDefault","currentTabLink","hideCurrent","target","hash","substring","saveState","click","ulLink","currentTab","previousTabItem","previousElementSibling","lastElementChild","nextTabItem","nextElementSibling","metaKey","altKey","activeElement","keyCode","stopPropagation","focus","toString","split","host","replace","storageKey","setItem","element","currentTabSet","parentTab","theId","i","l","appendChild","outerWidth","toTabs","parentTabSet","showTab","show","parentElement","nodeName","eventName","related","OriginalCustomEvent","CustomEvent","bubbles","cancelable","relatedTarget","dispatchEvent"],"mappings":"AACEA,eAAeC,OAAO,gBAAiB,cAAcC,YAEnDC,gCAAkC,MAAO,CAAC,SAAU,cAAe,OAAQ,aAAc,kBAEzFC,aAAe,OAAOC,KAAKC,aAAa,UAExCF,WAAWG,GAAS,OAAOF,KAAKG,aAAa,SAAUD,GAEvDE,WAAa,OAAOJ,KAAKC,aAAa,QAEtCG,SAASF,GAASF,KAAKG,aAAa,OAAQD,GAE5CG,kBAAoB,OAAOL,KAAKC,aAAa,gBAAkB,aAE/DI,gBAAgBH,GAASF,KAAKG,aAAa,cAAeD,GAE1DI,iBAAmB,OAAON,KAAKC,aAAa,cAE5CK,eAAeJ,GAASF,KAAKG,aAAa,aAAcD,GAExDK,oBAAsB,OAAOP,KAAKC,aAAa,kBAE/CM,kBAAkBL,GAASF,KAAKG,aAAa,iBAAkBD,GAG/DM,cACEC,QAGAT,KAAKU,WAAY,EACjBV,KAAKW,cAAgB,GACrBX,KAAKY,WAAY,EACjBZ,KAAKa,UAAW,EAChBb,KAAKc,KAAO,GACZd,KAAKe,UAAY,GACjBf,KAAKgB,OAAS,GACdhB,KAAKiB,YAAc,GAIrBT,oBAcE,KAbKR,KAAKK,aAAgBL,KAAKK,cAAyE,IAA1D,CAAC,aAAc,YAAYa,QAAQlB,KAAKK,eACpFL,KAAKG,aAAa,cAAe,cAGnCH,KAAKI,KAAOJ,KAAKC,aAAa,SAAW,OACzCD,KAAKD,OAASC,KAAKD,QAAU,QAC7BC,KAAKM,WAAaN,KAAKC,aAAa,eAAiB,QACrDD,KAAKO,cAAgBP,KAAKC,aAAa,kBAAoB,EAG3DD,KAAKgB,OAAS,GAAGG,MAAMC,KAAKpB,KAAKqB,iBAAiB,aAG7CrB,KAAKgB,OAAOM,OACf,MAAM,IAAIC,MAAM,gDAclB,GAVIvB,KAAKwB,qBAAqBxB,KAAM,gBAClCA,KAAKa,UAAW,GAIdb,KAAKyB,cAAc,gBACrBzB,KAAKY,WAAY,GAIfZ,KAAKD,OAAQ,CACf,MAAM2B,EAAOC,eAAeC,QAAQ5B,KAAK6B,iBAErCH,IAAS,MAAMI,KAAKJ,IACtB1B,KAAKiB,YAAYc,KAAKL,GAExB1B,KAAKgC,cAIgC,OAAnChC,KAAKiC,kBAAkBC,SACzBlC,KAAKmC,mBAIPnC,KAAKgB,OAAOoB,SAASC,IACnBA,EAAIlC,aAAa,OAAQ,YACzBH,KAAKc,KAAKiB,KAAK,QAAQM,EAAIC,MACvBD,EAAIE,aAAa,YACnBvC,KAAKU,WAAY,EACjBV,KAAKW,cAAgB0B,EAAIC,GACzBtC,KAAKyB,cAAc,QAAQY,EAAIC,MAAMnC,aAAa,gBAAiB,QACnEH,KAAKyB,cAAc,QAAQY,EAAIC,MAAMnC,aAAa,SAAU,IAC5DH,KAAKyB,cAAc,QAAQY,EAAIC,MAAMnC,aAAa,WAAY,SAK7DH,KAAKU,YACRV,KAAKe,UAAU,GAAGZ,aAAa,SAAU,IACzCH,KAAKU,WAAY,EACjBV,KAAKW,cAAgBX,KAAKgB,OAAO,GAAGsB,GACpCtC,KAAKe,UAAU,GAAGZ,aAAa,gBAAiB,QAChDH,KAAKe,UAAU,GAAGZ,aAAa,WAAY,KAC3CH,KAAKe,UAAU,GAAGZ,aAAa,SAAU,IACzCH,KAAKgB,OAAO,GAAGb,aAAa,SAAU,KAIpCqC,OAAOC,SAASf,KAAKgB,MAAM,SAIb,cAAd1C,KAAKI,MACPJ,KAAK2C,YAAYC,KAAK5C,KAAtBA,GAGsB,SAApBA,KAAKM,aAEPN,KAAK6C,WAAWD,KAAK5C,MAGrBwC,OAAOM,iBAAiB,SAAU9C,KAAK6C,WAAWD,KAAK5C,QAK3DQ,uBACE,MAAMuC,EAAO/C,KACPgD,EAAOhD,KAAKyB,cAAc,MACb,GAAGN,MAAMC,KAAK4B,EAAK3B,iBAAiB,MAE5Ce,SAASa,IAClBA,EAAKC,oBAAoB,QAASH,EAAKI,qBAAqB,MAG9DH,EAAKE,oBAAoB,UAAWH,EAAKK,cAAc,GAIzD5C,mBACE,MAAMuC,EAAO/C,KACb,IAAIqD,EAAM,GAE2C,OAAjDrD,KAAKiC,kBAAkBC,QAAQoB,gBACjCD,EAAME,SAASC,cAAc,OAG/BH,EAAIlD,aAAa,OAAQ,WACzBH,KAAKgB,OAAOoB,SAASqB,IACnB,IAAKA,EAAMnB,GACT,MAAM,IAAIf,MAAM,4CAGlB,GAAIkC,EAAMC,aAAe1D,KACvB,OAGF,MAAM2D,EAASF,EAAMxD,aAAa,YAAa,EACzC2D,EAAYL,SAASC,cAAc,MACnCK,EAAWN,SAASC,cAAc,KAExCI,EAAUzD,aAAa,OAAQ,gBAC/B0D,EAAS1D,aAAa,OAAQ,OAC9B0D,EAAS1D,aAAa,gBAAiBsD,EAAMnB,IAC7CuB,EAAS1D,aAAa,gBAAiBwD,EAAS,OAAS,SACzDE,EAAS1D,aAAa,WAAYwD,EAAS,IAAM,MACjDE,EAAS1D,aAAa,OAAQ,IAAIsD,EAAMnB,MACxCuB,EAAS1D,aAAa,KAAM,OAAOsD,EAAMnB,MACzCuB,EAASC,UAAYL,EAAMxD,aAAa,QAEpC0D,GACFE,EAAS1D,aAAa,SAAU,IAGlC0D,EAASf,iBAAiB,QAASC,EAAKI,oBAAoBP,KAAKG,IACjE/C,KAAKe,UAAUgB,KAAK8B,GAEpBD,EAAUG,OAAOF,GACjBR,EAAIU,OAAOH,GAEXH,EAAMtD,aAAa,kBAAmB,OAAOsD,EAAMnB,MAE9CqB,GACHF,EAAMtD,aAAa,cAAe,WAItCH,KAAKgE,sBAAsB,aAAcX,GAGzCrD,KAAKyB,cAAc,MAAMqB,iBAAiB,UAAW9C,KAAKoD,aAAaR,KAAK5C,OAG9EQ,cAEE,GAAIR,KAAKW,cAAe,CAEtB,MAAMsD,EAAKjE,KAAKyB,cAAc,oBAAoBzB,KAAKW,mBACvDX,KAAKkE,oBAAoB,kBAAmBD,EAAIjE,KAAKyB,cAAc,QAAQzB,KAAKW,kBAChFsD,EAAGE,gBAAgB,UACnBF,EAAG9D,aAAa,WAAY,MAC5BH,KAAKyB,cAAc,IAAIzB,KAAKW,iBAAiBwD,gBAAgB,UAC7DnE,KAAKyB,cAAc,IAAIzB,KAAKW,iBAAiBR,aAAa,cAAe,QACzE8D,EAAGE,gBAAgB,iBAEnBnE,KAAKkE,oBAAoB,oBAAqBD,EAAIjE,KAAKyB,cAAc,QAAQzB,KAAKW,mBAKtFH,oBAAoB4D,GAClBA,EAAEC,iBACF,MAAMC,EAAiBtE,KAAKW,cAExBX,KAAKU,WACPV,KAAKuE,cAKPvE,KAAKkE,oBAAoB,kBAAmBE,EAAEI,OAAQxE,KAAKyB,cAAc,QAAQ6C,MACjFF,EAAEI,OAAOrE,aAAa,SAAU,IAChCiE,EAAEI,OAAOrE,aAAa,gBAAiB,QACvCiE,EAAEI,OAAOrE,aAAa,WAAY,KAClCH,KAAKyB,cAAc2C,EAAEI,OAAOC,MAAMtE,aAAa,SAAU,IACzDH,KAAKyB,cAAc2C,EAAEI,OAAOC,MAAMN,gBAAgB,eAClDnE,KAAKW,cAAgByD,EAAEI,OAAOC,KAAKC,UAAU,GAE7C1E,KAAKkE,oBAAoB,mBAAoBE,EAAEI,OAAQxE,KAAKyB,cAAc,QAAQ6C,MAClFtE,KAAK2E,UAAU,QAAQP,EAAEI,OAAOC,KAAKC,UAAU,MAGjDlE,QAAQ6B,GACUkB,SAAS9B,cAAc,QAAQY,EAAIC,MAC3CsC,QAGVpE,KAAKqE,GACHA,EAAOD,QAGTpE,aAAa4D,GAEX,MAAMU,EAAa9E,KAAKyB,cAAc,QAAQzB,KAAKW,iBAE7CoE,EAAkBD,EAAWpB,WAAWsB,wBACzCF,EAAWpB,WAAWA,WAAWuB,iBAChCC,EAAcJ,EAAWpB,WAAWyB,oBACrCL,EAAWpB,WAAWA,WAAWzB,kBAGtC,IAAImC,EAAEgB,UAAWhB,EAAEiB,SAIyC,IAAxDrF,KAAKc,KAAKI,QAAQ,IAAIqC,SAAS+B,cAAchD,MAKjD,OAAQ8B,EAAEmB,SACR,KAAK,GACL,KAAK,GACHnB,EAAEC,iBACFD,EAAEoB,kBACFT,EAAgBtD,cAAc,KAAKmD,QACnCG,EAAgBtD,cAAc,KAAKgE,QACnC,MACF,KAAK,GACL,KAAK,GACHrB,EAAEC,iBACFD,EAAEoB,kBACFN,EAAYzD,cAAc,KAAKmD,QAC/BM,EAAYzD,cAAc,KAAKgE,SAQrCjF,gBACE,OAAOgC,OAAOC,SAASf,KAAKgE,WAAWC,MAAMnD,OAAOC,SAASmD,MAAM,GAAGC,QAAQ,wBAAyB,IAAIF,MAAM,KAAK,GAIxHnF,UAAUN,GACR,MAAM4F,EAAa9F,KAAK6B,gBACxBF,eAAeoE,QAAQD,EAAY5F,GAGrCM,cACE,MAAMuC,EAAO/C,KACPc,EAAOd,KAAKe,UAElB,GAAIf,KAAKY,UAAW,CAElB,GAAIZ,KAAKiB,YAAYK,QAAkC,KAAxBtB,KAAKiB,YAAY,GAAW,CACzD,MAAMwD,EAAOzE,KAAKiB,YAAY,GAAGyD,UAAU,GACrCsB,EAAUhG,KAAKyB,cAAc,GAAGgD,KAGtC,GAAIuB,EAAS,CACX,MAAMC,EAAgBjG,KAAKwB,qBAAqBwE,EAAS,cAGzD,GAFqBhG,KAAKwB,qBAAqByE,EAAe,cAE5C,CAChB,MAAMC,EAAYlG,KAAKwB,qBAAqByE,EAAe,WACvDC,GACFlG,KAAKiB,YAAYc,KAAK,QAAQmE,EAAU5D,QAOhDxB,EAAKsB,SAASC,IACZ,GAAIrC,KAAKiB,YAAYK,OAAQ,CAC3B,MAAM6E,EAAQ,QAAQ9D,EAAIC,MAEe,IAArCtC,KAAKiB,YAAYC,QAAQiF,GAC3B9D,EAAI8B,gBAAgB,UAEpB9B,EAAIlC,aAAa,SAAU,IAI3BkC,EAAIqB,aAAeX,GACrB/C,KAAKe,UAAUgB,KAAKM,WAKxBvB,EAAKsB,SAASC,IACZ,GAAIrC,KAAKiB,YAAYK,OAAQ,CAC3B,MAAM6E,EAAQ,QAAQ9D,EAAIoC,OACtBzE,KAAKiB,YAAYC,QAAQiF,IAAU,EACrC9D,EAAI8B,gBAAgB,UAEpB9B,EAAIlC,aAAa,SAAU,QAKjCH,KAAKe,UAAYD,EAIrBN,SACE,MAAMuC,EAAO/C,KAEb,IAAK,IAAIoG,EAAI,EAAGC,EAAIrG,KAAKgB,OAAOM,OAAQ8E,EAAIC,IAAKD,EAC3CpG,KAAKgB,OAAOoF,GAAG1C,WAAWA,WAAWA,aAAe1D,MACtDA,KAAKe,UAAUgB,KAAK/B,KAAKgB,OAAOoF,IAIhCpG,KAAKe,UAAUO,QACjBtB,KAAKe,UAAUqB,SAASqB,IACtBV,EAAKuD,YAAY7C,MAKvBjD,cACE,MAAMuC,EAAO/C,KAQTA,KAAKgB,OAAOM,QACdtB,KAAKgB,OAAOoB,SAASqB,IACNV,EAAKtB,cAAc,oBAAsBgC,EAAMnB,GAAK,MAE5DoB,WAAW4C,YAAY7C,MAMlCjD,aACE,GAAIgC,OAAO+D,WAAa,IAAK,CAC3B,GAAkB,SAAdvG,KAAKI,KACP,OAGFJ,KAAKwG,OAAO5D,KAAK5C,MACjBA,KAAKI,KAAO,WACP,CACL,GAAkB,cAAdJ,KAAKI,KACP,OAGFJ,KAAK2C,YAAYC,KAAK5C,MACtBA,KAAKI,KAAO,aAIhBI,kBACE,MAAMiE,EAAOjC,OAAOC,SAASf,KAAKgB,MAAM,YAClCsD,EAAUhG,KAAKyB,cAAcgD,EAAK,IAExC,GAAIuB,EAAS,CAEX,MAAMC,EAAgBjG,KAAKwB,qBAAqBwE,EAAS,cACnDS,EAAezG,KAAKwB,qBAAqByE,EAAe,cAE9D,GAAIQ,EAAc,CAChB,MAAMP,EAAYlG,KAAKwB,qBAAqByE,EAAe,WAC3DQ,EAAaC,QAAQR,GAErBlG,KAAK2G,KAAKX,QAGVhG,KAAK0G,QAAQV,IAKnBxF,qBAAqByD,EAAI/B,GACvB,MAAQ+B,EAAKA,EAAG2C,gBAAkB3C,EAAG4C,SAASvD,gBAAkBpB,IAChE,OAAO+B,EAKTzD,oBAAoBsG,EAAWd,EAASe,GACtC,MAAMC,EAAsB,IAAIC,YAAYH,EAAW,CAAEI,SAAS,EAAMC,YAAY,IAChFJ,IACFC,EAAoBI,cAAgBL,GAGtCf,EAAQqB,cAAcL,GACtBhB,EAAQ9C,oBAAoB4D,EAAWd"}