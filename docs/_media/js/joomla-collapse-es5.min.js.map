{"version":3,"file":"joomla-collapse-es5.min.js","sources":["../../../src/js/collapse/collapse.js"],"sourcesContent":["(() => {\n  customElements.define('joomla-collapse', class extends HTMLElement {\n    static get observedAttributes() {\n      return ['state'];\n    }\n\n    get state() { return this.getAttribute('state'); }\n\n    set state(value) { return this.setAttribute('state', value); }\n\n    connectedCallback() {\n      const self = this;\n      // id is required\n      if (!this.id) return;\n\n      const linked = [].slice.call(document.querySelectorAll(`[href=\"#${this.id}\"],[data-target=\"#${this.id}\"]`));\n\n      linked.forEach((element) => {\n        if (!self.state || (self.state && self.state === 'closed')) {\n          self.state = 'closed';\n          element.setAttribute('aria-expanded', 'false');\n          element.setAttribute('aria-controls', self.id);\n        } else {\n          element.setAttribute('aria-expanded', 'true');\n          element.setAttribute('aria-controls', self.id);\n        }\n\n        element.addEventListener('click', (event) => {\n          let colId = '';\n          if (!event.target.hasAttribute('data-target')) colId = event.target.getAttribute('href').replace('#', '');\n          if (!event.target.hasAttribute('href')) colId = event.target.getAttribute('data-target').replace('#', '');\n          event.preventDefault();\n          event.stopPropagation();\n          document.getElementById(colId).toggle();\n        });\n      });\n    }\n\n    disconnectedCallback() {\n      let linked = document.querySelector(`[href=\"#${this.id}\"]`);\n      if (!linked) linked = document.querySelector(`[data-target=\"#${this.id}\"]`);\n      if (linked) {\n        linked.removeEventListener('click', this);\n      }\n    }\n\n    attributeChangedCallback(attr, oldValue, newValue) {\n      const linked = document.querySelector(`[href=\"#${this.id}\"]`);\n      switch (attr) {\n        case 'state':\n          if (newValue === 'closed') {\n            linked.setAttribute('aria-expanded', 'false');\n          } else if (newValue === 'open') {\n            linked.setAttribute('aria-expanded', 'true');\n          }\n          break;\n        default:\n          break;\n      }\n    }\n\n    toggle() {\n      let linked = document.querySelector(`[href=\"#${this.id}\"]`);\n      if (!linked) linked = document.querySelector(`[data-target=\"#${this.id}\"]`);\n      if (this.state === 'closed') {\n        this.state = 'open';\n        linked.setAttribute('aria-expanded', 'true');\n      } else {\n        this.state = 'closed';\n        linked.setAttribute('aria-expanded', 'false');\n      }\n    }\n  });\n})();\n"],"names":["customElements","define","HTMLElement","self","this","id","slice","call","document","querySelectorAll","forEach","element","state","setAttribute","addEventListener","event","colId","target","hasAttribute","getAttribute","replace","preventDefault","stopPropagation","getElementById","toggle","linked","querySelector","removeEventListener","attr","oldValue","newValue","value"],"mappings":"0kDACEA,eAAeC,OAAO,sQAAiCC,ySAE5C,CAAC,8DAQFC,EAAOC,KAERA,KAAKC,IAEK,GAAGC,MAAMC,KAAKC,SAASC,mCAA4BL,KAAKC,gCAAuBD,KAAKC,WAE5FK,SAAQ,SAACC,IACTR,EAAKS,OAAUT,EAAKS,OAAwB,WAAfT,EAAKS,OACrCT,EAAKS,MAAQ,SACbD,EAAQE,aAAa,gBAAiB,SACtCF,EAAQE,aAAa,gBAAiBV,EAAKE,MAE3CM,EAAQE,aAAa,gBAAiB,QACtCF,EAAQE,aAAa,gBAAiBV,EAAKE,KAG7CM,EAAQG,iBAAiB,SAAS,SAACC,OAC7BC,EAAQ,GACPD,EAAME,OAAOC,aAAa,iBAAgBF,EAAQD,EAAME,OAAOE,aAAa,QAAQC,QAAQ,IAAK,KACjGL,EAAME,OAAOC,aAAa,UAASF,EAAQD,EAAME,OAAOE,aAAa,eAAeC,QAAQ,IAAK,KACtGL,EAAMM,iBACNN,EAAMO,kBACNd,SAASe,eAAeP,GAAOQ,kEAM/BC,EAASjB,SAASkB,gCAAyBtB,KAAKC,UAC/CoB,IAAQA,EAASjB,SAASkB,uCAAgCtB,KAAKC,WAChEoB,GACFA,EAAOE,oBAAoB,QAASvB,uDAIfwB,EAAMC,EAAUC,OACjCL,EAASjB,SAASkB,gCAAyBtB,KAAKC,iBAC9CuB,OACD,QACc,WAAbE,EACFL,EAAOZ,aAAa,gBAAiB,SACf,SAAbiB,GACTL,EAAOZ,aAAa,gBAAiB,8CASvCY,EAASjB,SAASkB,gCAAyBtB,KAAKC,UAC/CoB,IAAQA,EAASjB,SAASkB,uCAAgCtB,KAAKC,WACjD,WAAfD,KAAKQ,YACFA,MAAQ,OACba,EAAOZ,aAAa,gBAAiB,eAEhCD,MAAQ,SACba,EAAOZ,aAAa,gBAAiB,+CA/DpBT,KAAKe,aAAa,uBAE7BY,UAAgB3B,KAAKS,aAAa,QAASkB"}