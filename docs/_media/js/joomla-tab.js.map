{"version":3,"file":"joomla-tab.js","sources":["../../../src/js/tab/tab.js"],"sourcesContent":["(() => {\n  customElements.define('joomla-tab', class extends HTMLElement {\n    /* Attributes to monitor */\n    static get observedAttributes() { return ['recall', 'orientation', 'view']; }\n\n    get recall() { return this.getAttribute('recall'); }\n\n    get view() { return this.getAttribute('view'); }\n\n    set view(value) { this.setAttribute('view', value); }\n\n    get orientation() { return this.getAttribute('orientation'); }\n\n    set orientation(value) { this.setAttribute('orientation', value); }\n\n    /* Lifecycle, element created */\n    constructor() {\n      super();\n\n      this.hasActive = false;\n      this.currentActive = '';\n      this.hasNested = false;\n      this.isNested = false;\n      this.tabs = [];\n    }\n\n    /* Lifecycle, element appended to the DOM */\n    connectedCallback() {\n      if (!this.orientation || (this.orientation && ['horizontal', 'vertical'].indexOf(this.orientation) === -1)) {\n        this.orientation = 'horizontal';\n      }\n\n      // get tab elements\n      const self = this;\n      const tabs = [].slice.call(this.querySelectorAll('section'));\n      let tabsEl = [];\n      const tabLinkHash = [];\n\n      // Sanity check\n      if (!tabs) {\n        return;\n      }\n\n      if (this.parentNode.closest('joomla-tab')) {\n        this.isNested = true;\n      }\n\n      if (this.querySelector('joomla-tab')) {\n        this.hasNested = true;\n      }\n\n      // Use the sessionStorage state!\n      if (this.hasAttribute('recall')) {\n        const href = sessionStorage.getItem(this.getStorageKey());\n        if (href) {\n          tabLinkHash.push(href);\n        }\n      }\n\n      if (this.hasNested) {\n        // @todo use the recall attribute\n        const href = sessionStorage.getItem(this.getStorageKey());\n        if (href) {\n          tabLinkHash.push(href);\n        }\n        // @todo end\n\n        // Add possible parent tab to the aray for activation\n        if (tabLinkHash.length && tabLinkHash[0] !== '') {\n          const hash = tabLinkHash[0].substring(5);\n          const element = this.querySelector(`#${hash}`);\n\n          // Add the parent tab to the array for activation\n          if (element) {\n            const currentTabSet = element.closest('joomla-tab');\n\n            if (this.isNested) {\n              const parentTab = currentTabSet.closest('section');\n\n              if (parentTab) {\n                tabLinkHash.push(`#tab-${parentTab.id}`);\n              }\n            }\n          }\n        }\n\n        // remove the cascaded tabs and activate the right tab\n        tabs.forEach((tab) => {\n          if (tabLinkHash.length) {\n            const theId = `#tab-${tab.id}`;\n\n            if (tabLinkHash.indexOf(theId) === -1) {\n              tab.removeAttribute('active');\n            } else {\n              tab.setAttribute('active', '');\n            }\n          }\n\n          if (tab.parentNode === self) {\n            tabsEl.push(tab);\n          }\n        });\n      } else {\n        // Activate the correct tab\n        tabs.forEach((tab) => {\n          if (tabLinkHash.length) {\n            const theId = `#tab-${tab.id}`;\n            if (tabLinkHash.indexOf(theId) === -1) {\n              tab.removeAttribute('active');\n            } else {\n              tab.setAttribute('active', '');\n            }\n          }\n        });\n\n        tabsEl = tabs;\n      }\n\n      // Create the navigation\n      if (this.view !== 'accordion') {\n        this.createNavigation(tabsEl);\n      }\n\n      // Add missing role\n      tabsEl.forEach((tab) => {\n        tab.setAttribute('role', 'tabpanel');\n        this.tabs.push(`#tab-${tab.id}`);\n        if (tab.hasAttribute('active')) {\n          this.hasActive = true;\n          this.currentActive = tab.id;\n          this.querySelector(`#tab-${tab.id}`).setAttribute('aria-selected', 'true');\n          this.querySelector(`#tab-${tab.id}`).setAttribute('active', '');\n          this.querySelector(`#tab-${tab.id}`).setAttribute('tabindex', '0');\n        }\n      });\n\n      // Fallback if no active tab\n      if (!this.hasActive) {\n        tabsEl[0].setAttribute('active', '');\n        tabsEl[0].removeAttribute('aria-hidden');\n        this.hasActive = true;\n        this.currentActive = tabsEl[0].id;\n        this.querySelector(`#tab-${tabsEl[0].id}`).setAttribute('aria-selected', 'true');\n        this.querySelector(`#tab-${tabsEl[0].id}`).setAttribute('tabindex', '0');\n        this.querySelector(`#tab-${tabsEl[0].id}`).setAttribute('active', '');\n      }\n\n      // Check if there is a hash in the URI\n      if (window.location.href.match(/#\\S[^&]*/)) {\n        const hash = window.location.href.match(/#\\S[^&]*/);\n        const element = this.querySelector(hash[0]);\n\n        if (element) {\n          // Activate any parent tabs (nested tables)\n          const currentTabSet = element.closest('joomla-tab');\n\n          if (this.isNested) {\n            const parentTabSet = currentTabSet.closest('joomla-tab');\n            const parentTab = currentTabSet.closest('section');\n            parentTabSet.showTab(parentTab);\n            // Now activate the given tab\n            this.show(element);\n          } else {\n            // Now activate the given tab\n            this.showTab(element);\n          }\n        }\n      }\n\n      // Convert tabs to accordian\n      self.checkView(self);\n      window.addEventListener('resize', () => {\n        self.checkView(self);\n      });\n    }\n\n    /* Lifecycle, element removed from the DOM */\n    disconnectedCallback() {\n      const ulEl = this.querySelector('ul');\n      const navigation = [].slice.call(ulEl.querySelectorAll('a'));\n\n      navigation.forEach((link) => {\n        link.removeEventListener('click', this);\n      });\n      ulEl.removeEventListener('keydown', this);\n    }\n\n    /* Method to create the tabs navigation */\n    createNavigation(tabs) {\n      if (this.firstElementChild.nodeName.toLowerCase() === 'ul') {\n        return;\n      }\n\n      const nav = document.createElement('ul');\n      nav.setAttribute('role', 'tablist');\n\n      /** Activate Tab */\n      const activateTabFromLink = (e) => {\n        e.preventDefault();\n\n        // Doing toggle for accordion\n        const justHide = this.view === 'accordion' && e.target.hasAttribute('active');\n\n        if (this.hasActive) {\n          this.hideCurrent();\n\n          if (justHide) {\n            this.hasActive = false;\n            return;\n          }\n        }\n\n        const currentTabLink = this.currentActive;\n\n        // Set the selected tab as active\n        // Emit show event\n        this.dispatchCustomEvent('joomla.tab.show', e.target, this.querySelector(`#tab-${currentTabLink}`));\n        e.target.setAttribute('active', '');\n        e.target.setAttribute('aria-selected', 'true');\n        e.target.setAttribute('tabindex', '0');\n        this.querySelector(e.target.hash).setAttribute('active', '');\n        this.querySelector(e.target.hash).removeAttribute('aria-hidden');\n        this.currentActive = e.target.hash.substring(1);\n        // Emit shown event\n        this.dispatchCustomEvent('joomla.tab.shown', e.target, this.querySelector(`#tab-${currentTabLink}`));\n        this.saveState(`#tab-${e.target.hash.substring(1)}`);\n        this.hasActive = true;\n      };\n\n      tabs.forEach((tab) => {\n        if (!tab.id) {\n          return;\n        }\n\n        const active = tab.hasAttribute('active');\n        const liElement = document.createElement('li');\n        const aElement = document.createElement('a');\n\n        liElement.setAttribute('role', 'presentation');\n        aElement.setAttribute('role', 'tab');\n        aElement.setAttribute('aria-controls', tab.id);\n        aElement.setAttribute('aria-selected', active ? 'true' : 'false');\n        aElement.setAttribute('tabindex', active ? '0' : '-1');\n        aElement.setAttribute('href', `#${tab.id}`);\n        aElement.setAttribute('id', `tab-${tab.id}`);\n        aElement.innerHTML = tab.getAttribute('name');\n\n        if (active) {\n          aElement.setAttribute('active', '');\n        }\n\n        aElement.addEventListener('click', activateTabFromLink);\n\n        liElement.appendChild(aElement);\n        nav.appendChild(liElement);\n\n        tab.setAttribute('aria-labelledby', `tab-${tab.id}`);\n        if (!active) {\n          tab.setAttribute('aria-hidden', 'true');\n        }\n      });\n\n      this.insertAdjacentElement('afterbegin', nav);\n\n      // Keyboard access\n      this.addKeyListeners();\n    }\n\n    hideCurrent() {\n      // Unset the current active tab\n      if (this.currentActive) {\n        // Emit hide event\n        const el = this.querySelector(`a[aria-controls=\"${this.currentActive}\"]`);\n        this.dispatchCustomEvent('joomla.tab.hide', el, this.querySelector(`#tab-${this.currentActive}`));\n        el.removeAttribute('active');\n        el.setAttribute('tabindex', '-1');\n        this.querySelector(`#${this.currentActive}`).removeAttribute('active');\n        this.querySelector(`#${this.currentActive}`).setAttribute('aria-hidden', 'true');\n        el.removeAttribute('aria-selected');\n        // Emit hidden event\n        this.dispatchCustomEvent('joomla.tab.hidden', el, this.querySelector(`#tab-${this.currentActive}`));\n      }\n    }\n\n    showTab(tab) {\n      const tabLink = document.querySelector(`#tab-${tab.id}`);\n      tabLink.click();\n    }\n\n    show(ulLink) {\n      ulLink.click();\n    }\n\n    addKeyListeners() {\n      const keyBehaviour = (e) => {\n        // collect tab targets, and their parents' prev/next (or first/last)\n        const currentTab = this.querySelector(`#tab-${this.currentActive}`);\n        // const tablist = [].slice.call(this.querySelector('ul').querySelectorAll('a'));\n\n        const previousTabItem = currentTab.parentNode.previousElementSibling\n          || currentTab.parentNode.parentNode.lastElementChild;\n        const nextTabItem = currentTab.parentNode.nextElementSibling\n          || currentTab.parentNode.parentNode.firstElementChild;\n\n        // don't catch key events when ⌘ or Alt modifier is present\n        if (e.metaKey || e.altKey) {\n          return;\n        }\n\n        if (this.tabs.indexOf(`#${document.activeElement.id}`) === -1) {\n          return;\n        }\n\n        // catch left/right and up/down arrow key events\n        switch (e.keyCode) {\n          case 37:\n          case 38:\n            previousTabItem.querySelector('a').click();\n            previousTabItem.querySelector('a').focus();\n            e.preventDefault();\n            break;\n          case 39:\n          case 40:\n            nextTabItem.querySelector('a').click();\n            nextTabItem.querySelector('a').focus();\n            e.preventDefault();\n            break;\n          default:\n            break;\n        }\n      };\n      this.querySelector('ul').addEventListener('keyup', keyBehaviour);\n    }\n\n    getStorageKey() {\n      return window.location.href.toString().split(window.location.host)[1].replace(/&return=[a-zA-Z0-9%]+/, '').split('#')[0];\n    }\n\n    saveState(value) {\n      const storageKey = this.getStorageKey();\n      sessionStorage.setItem(storageKey, value);\n    }\n\n    /** Method to convert tabs to accordion and vice versa depending on screen size */\n    checkView(element) {\n      const el = element;\n      const nav = el.querySelector('ul');\n      const tabsEl = [];\n      if (document.body.getBoundingClientRect().width > 920) {\n        if (this.view === 'tabs') {\n          return;\n        }\n        el.view = 'tabs';\n        // convert to tabs\n        const panels = [].slice.call(nav.querySelectorAll('section'));\n\n        // remove the cascaded tabs\n        for (let i = 0, l = panels.length; i < l; ++i) {\n          if (panels[i].parentNode.parentNode.parentNode === el) {\n            tabsEl.push(panels[i]);\n          }\n        }\n\n        if (tabsEl.length) {\n          tabsEl.forEach((panel) => {\n            el.appendChild(panel);\n          });\n        }\n      } else {\n        if (this.view === 'accordion') {\n          return;\n        }\n        el.view = 'accordion';\n\n        // convert to accordion\n        const panels = [].slice.call(el.querySelectorAll('section'));\n\n        // remove the cascaded tabs\n        for (let i = 0, l = panels.length; i < l; ++i) {\n          if (panels[i].parentNode === el) {\n            tabsEl.push(panels[i]);\n          }\n        }\n\n        if (tabsEl.length) {\n          tabsEl.forEach((panel) => {\n            const link = el.querySelector(`a[aria-controls=\"${panel.id}\"]`);\n            if (link.parentNode.parentNode === el.firstElementChild) {\n              link.parentNode.appendChild(panel);\n            }\n          });\n        }\n      }\n    }\n\n    /* Method to dispatch events */\n    dispatchCustomEvent(eventName, element, related) {\n      const OriginalCustomEvent = new CustomEvent(eventName, { bubbles: true, cancelable: true });\n      OriginalCustomEvent.relatedTarget = related;\n      element.dispatchEvent(OriginalCustomEvent);\n      element.removeEventListener(eventName, element);\n    }\n  });\n})();\n"],"names":[],"mappings":"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"}