{"version":3,"file":"joomla-dropdown.js","sources":["../../../src/js/dropdown/dropdown.js"],"sourcesContent":["(() => {\n  class JoomlaDropdownElement extends HTMLElement {\n    /* Attributes to monitor */\n    static get observedAttributes() {\n      return ['for'];\n    }\n\n    get for() { return this.getAttribute('for'); }\n\n    set for(value) { return this.setAttribute('for', value); }\n\n    connectedCallback() {\n      this.setAttribute('aria-labelledby', this.for.substring(1));\n      const button = document.querySelector(this.for);\n      const innerLinks = this.querySelectorAll('a');\n\n      if (!button.id) {\n        return;\n      }\n      // var children = [].slice.call( menu[getElementsByTagName]('*'));\n      // this.classList.add('dropdown');\n\n      button.setAttribute('aria-haspopup', true);\n      button.setAttribute('aria-expanded', false);\n\n      button.addEventListener('click', (event) => {\n        if (this.hasAttribute('expanded')) {\n          this.removeAttribute('expanded');\n          event.target.setAttribute('aria-expanded', false);\n        } else {\n          this.setAttribute('expanded', '');\n          event.target.setAttribute('aria-expanded', true);\n        }\n\n        document.addEventListener('click', (evt) => {\n          if (evt.target !== button) {\n            if (!this.findAncestor(evt.target, 'joomla-dropdown')) {\n              this.close();\n            }\n          }\n        });\n\n        innerLinks.forEach((innerLink) => {\n          innerLink.addEventListener('click', () => {\n            this.close();\n          });\n        });\n      });\n    }\n\n    /*eslint-disable */\n    /* Method to dispatch events */\n    dispatchCustomEvent(eventName) {\n      const OriginalCustomEvent = new CustomEvent(eventName);\n      OriginalCustomEvent.relatedTarget = this;\n      this.dispatchEvent(OriginalCustomEvent);\n      this.removeEventListener(eventName, this);\n    }\n\n    adoptedCallback(oldDocument, newDocument) { }\n\n\n    attributeChangedCallback(attr, oldValue, newValue) {\n      switch (attr) {\n        // case 'name':\n        // console.log(newValue);\n        // break;\n      }\n    }\n    /* eslint-enable */\n\n    close() {\n      const button = document.querySelector(`#${this.getAttribute('aria-labelledby')}`);\n      this.removeAttribute('expanded');\n      button.setAttribute('aria-expanded', false);\n    }\n\n    /* eslint-disable */\n    findAncestor(el, tagName) {\n      while ((el = el.parentElement) && el.nodeName.toLowerCase() !== tagName);\n      return el;\n    }\n    /* eslint-enable */\n  }\n\n  customElements.define('joomla-dropdown', JoomlaDropdownElement);\n})();\n"],"names":[],"mappings":"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"}