{"version":3,"file":"joomla-collapse.min.js","sources":["../../../src/js/collapse/collapse.js"],"sourcesContent":["(() => {\n  customElements.define('joomla-collapse', class extends HTMLElement {\n    static get observedAttributes() {\n      return ['state'];\n    }\n\n    get state() { return this.getAttribute('state'); }\n\n    set state(value) { return this.setAttribute('state', value); }\n\n    connectedCallback() {\n      const self = this;\n      // id is required\n      if (!this.id) return;\n\n      const linked = [].slice.call(document.querySelectorAll(`[href=\"#${this.id}\"],[data-target=\"#${this.id}\"]`));\n\n      linked.forEach((element) => {\n        if (!self.state || (self.state && self.state === 'closed')) {\n          self.state = 'closed';\n          element.setAttribute('aria-expanded', 'false');\n          element.setAttribute('aria-controls', self.id);\n        } else {\n          element.setAttribute('aria-expanded', 'true');\n          element.setAttribute('aria-controls', self.id);\n        }\n\n        element.addEventListener('click', (event) => {\n          let colId = '';\n          if (!event.target.hasAttribute('data-target')) colId = event.target.getAttribute('href').replace('#', '');\n          if (!event.target.hasAttribute('href')) colId = event.target.getAttribute('data-target').replace('#', '');\n          event.preventDefault();\n          event.stopPropagation();\n          document.getElementById(colId).toggle();\n        });\n      });\n    }\n\n    disconnectedCallback() {\n      let linked = document.querySelector(`[href=\"#${this.id}\"]`);\n      if (!linked) linked = document.querySelector(`[data-target=\"#${this.id}\"]`);\n      if (linked) {\n        linked.removeEventListener('click', this);\n      }\n    }\n\n    attributeChangedCallback(attr, oldValue, newValue) {\n      const linked = document.querySelector(`[href=\"#${this.id}\"]`);\n      switch (attr) {\n        case 'state':\n          if (newValue === 'closed') {\n            linked.setAttribute('aria-expanded', 'false');\n          } else if (newValue === 'open') {\n            linked.setAttribute('aria-expanded', 'true');\n          }\n          break;\n        default:\n          break;\n      }\n    }\n\n    toggle() {\n      let linked = document.querySelector(`[href=\"#${this.id}\"]`);\n      if (!linked) linked = document.querySelector(`[data-target=\"#${this.id}\"]`);\n      if (this.state === 'closed') {\n        this.state = 'open';\n        linked.setAttribute('aria-expanded', 'true');\n      } else {\n        this.state = 'closed';\n        linked.setAttribute('aria-expanded', 'false');\n      }\n    }\n  });\n})();\n"],"names":["customElements","define","HTMLElement","observedAttributes","state","this","getAttribute","value","setAttribute","[object Object]","self","id","slice","call","document","querySelectorAll","forEach","element","addEventListener","event","colId","target","hasAttribute","replace","preventDefault","stopPropagation","getElementById","toggle","linked","querySelector","removeEventListener","attr","oldValue","newValue"],"mappings":"AACEA,eAAeC,OAAO,kBAAmB,cAAcC,YACrDC,gCACE,MAAO,CAAC,SAGVC,YAAc,OAAOC,KAAKC,aAAa,SAEvCF,UAAUG,GAAS,OAAOF,KAAKG,aAAa,QAASD,GAErDE,oBACE,MAAMC,EAAOL,KAERA,KAAKM,IAEK,GAAGC,MAAMC,KAAKC,SAASC,iBAAiB,WAAWV,KAAKM,uBAAuBN,KAAKM,SAE5FK,SAASC,KACTP,EAAKN,OAAUM,EAAKN,OAAwB,WAAfM,EAAKN,OACrCM,EAAKN,MAAQ,SACba,EAAQT,aAAa,gBAAiB,SACtCS,EAAQT,aAAa,gBAAiBE,EAAKC,MAE3CM,EAAQT,aAAa,gBAAiB,QACtCS,EAAQT,aAAa,gBAAiBE,EAAKC,KAG7CM,EAAQC,iBAAiB,SAAUC,IACjC,IAAIC,EAAQ,GACPD,EAAME,OAAOC,aAAa,iBAAgBF,EAAQD,EAAME,OAAOf,aAAa,QAAQiB,QAAQ,IAAK,KACjGJ,EAAME,OAAOC,aAAa,UAASF,EAAQD,EAAME,OAAOf,aAAa,eAAeiB,QAAQ,IAAK,KACtGJ,EAAMK,iBACNL,EAAMM,kBACNX,SAASY,eAAeN,GAAOO,eAKrClB,uBACE,IAAImB,EAASd,SAASe,cAAc,WAAWxB,KAAKM,QAC/CiB,IAAQA,EAASd,SAASe,cAAc,kBAAkBxB,KAAKM,SAChEiB,GACFA,EAAOE,oBAAoB,QAASzB,MAIxCI,yBAAyBsB,EAAMC,EAAUC,GACvC,MAAML,EAASd,SAASe,cAAc,WAAWxB,KAAKM,QACtD,OAAQoB,GACN,IAAK,QACc,WAAbE,EACFL,EAAOpB,aAAa,gBAAiB,SACf,SAAbyB,GACTL,EAAOpB,aAAa,gBAAiB,SAQ7CC,SACE,IAAImB,EAASd,SAASe,cAAc,WAAWxB,KAAKM,QAC/CiB,IAAQA,EAASd,SAASe,cAAc,kBAAkBxB,KAAKM,SACjD,WAAfN,KAAKD,OACPC,KAAKD,MAAQ,OACbwB,EAAOpB,aAAa,gBAAiB,UAErCH,KAAKD,MAAQ,SACbwB,EAAOpB,aAAa,gBAAiB"}